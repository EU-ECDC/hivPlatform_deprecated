(()=>{"use strict";var e,t={8640:(e,t,a)=>{var r=a(4387),n=a(2544),l=a(8033);const i=jQuery;var s=a.n(i),o=a(2310),m=a(722),c=a(9478),d=a(8161),u=a(6432),g=a(840),p=a(6030),h=a(9521),E=a(1126),M=a(6087),y=a(7400),D=a(1700),b=a(9819),S=a(7664),Z=a(2632),f=a(5127);const C=e=>null==e;function v(){return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}const x=(0,l.Pi)((e=>{const{pages:t,activePageId:a,onPageChange:n}=e;return r.createElement("div",{style:{minWidth:250,maxWidth:250,backgroundColor:"white"}},r.createElement(y.Z,{nonLinear:!0,activeStep:a,orientation:"vertical"},t.map(((e,t)=>{const a={};return C(e.description)||(a.optional=r.createElement(h.Z,{width:"150px",textAlign:"left"},r.createElement(p.Z,{variant:"caption"},e.description))),r.createElement(D.Z,{key:t,completed:e.completed,disabled:e.disabled},r.createElement(b.Z,v({onClick:()=>n(t)},a),e.title),e.subPages&&r.createElement(f.Z,null,r.createElement(S.Z,null,e.subPages.map(((a,l)=>r.createElement(Z.Z,{button:!0,key:l,selected:l===e.activeSubPageId,disabled:a.disabled,onClick:()=>n(t,l)},a.title))))))}))))}));var P=a(2418),I=a(6777),A=a(6581),R=a(4569);const N=(0,l.Pi)((e=>{const{appMgr:t,open:a,onClose:n}=e,[l,i]=r.useState(null);return r.createElement(P.ZP,{anchor:"right",open:a,onClose:n},r.createElement(h.Z,{width:300,p:2},r.createElement(p.Z,{variant:"h6"},"Application"),r.createElement("ul",null,r.createElement("li",null,r.createElement(I.Z,{download:!0,href:"#",id:"downState",className:"shiny-download-link",variant:"button",style:{pointerEvents:"none"}},"Save state [DISABLED]")),r.createElement("li",null,r.createElement(I.Z,{href:"#",variant:"button",style:{pointerEvents:"none"}},"Load state [DISABLED]")),r.createElement("li",null,r.createElement(I.Z,{href:"./",target:"_blank",variant:"button"},"Open another instance"))),r.createElement(p.Z,{variant:"h6"},"Documentation"),r.createElement("ul",null,r.createElement("li",null,r.createElement(I.Z,{href:"./www/docs/HIVPlatform_2.0.0_manual.pdf",target:"_blank",variant:"button"},"Open manual [PDF]"))),r.createElement(p.Z,{variant:"h6"},"Options"),r.createElement(A.Z,{label:"Random seed",helperText:"Give empty value to remove fixed seed",variant:"filled",type:"number",fullWidth:!0,defaultValue:t.seedText,onChange:e=>{i(parseInt(e.target.value))}}),r.createElement(R.Z,{color:"primary",size:"small",onClick:()=>t.btnClicked("seed",l)},"Apply")))}));var _=a(6122),F=a(7301),T=a(6213),w=a(435),Y=a(798),O=a(9825),L=a(8815);const j=e=>{const{title:t,description:a,moreText:n,image:l,onClick:i}=e,[s,o]=r.useState(!1);return r.createElement(F.Z,null,r.createElement(T.Z,{onClick:i},r.createElement(Y.Z,{style:{height:300},image:l}),r.createElement(w.Z,null,r.createElement(p.Z,{gutterBottom:!0,variant:"h5",component:"h2"},t),r.createElement(p.Z,{variant:"body2",color:"textSecondary",component:"p"},a))),r.createElement(O.Z,{disableSpacing:!0},r.createElement(R.Z,{onClick:()=>o(!s),size:"small",color:"primary"},s?"Read less...":"Read more...")),r.createElement(L.Z,{in:s,timeout:"auto",unmountOnExit:!0},r.createElement(w.Z,null,n)))},k=e=>{const t=e.appMgr,a=()=>t.uiStateMgr.setActivePageId(1),n=r.createElement(r.Fragment,null,r.createElement("p",null,"The ",r.createElement("b",null,"HIV Estimates Accuracy Tool")," is an application that uses statistical methods to calculate adjusted estimates from HIV surveillance data."),r.createElement("p",null,"Missing data are a well-recognised problem within surveillance systems. When values for some variables are missing and cases with missing values are excluded from analysis, it may lead to biased and potentially less precise estimates. Reporting delay, the time from case diagnosis to notification, can lead to problems when analysing the most recent years given that information on certain cases or variables may not have been collected yet due to national reporting process characteristics."),r.createElement("p",null,"With this tool you can correct missing data for the variables age, gender, transmission category and CD4 count. Additionally, the tool allows for correction of delays in reporting. The adjustments may be used separately or in combination."),r.createElement("p",null,"The tool accepts HIV case-based surveillance data and requires a minimum set of variables routinely collected at national public health systems."),r.createElement("p",null,"A complete instruction ",r.createElement("a",{href:"#"},"manual")," will guide you through the tool. The manual can also be consulted to interpret the outputs. The outputs include results in the form of a report containing tables and graphs, and datasets in various file formats, in which the corrections have been incorporated and are ready for further analysis.")),l=r.createElement(r.Fragment,null,r.createElement("p",null,"The ",r.createElement("b",null,"HIV Modelling Tool")," is an application that can estimate How many people are getting infected with HIV, how many are being missed or not being reported and how many should be on treatment."),r.createElement("p",null,"The tool uses CD4 back calculation methods to estimate the number of people living with HIV, including those not yet diagnosed. The tool can also estimate the annual number of new HIV infections, the average time between infection and diagnosis, and the number of undiagnosed people CD4 category."),r.createElement("p",null,"The tool accepts a minimum required set of variables: HIV cases, AIDS cases and HIVAIDS cases and, if available, CD4 count at HIV diagnosis. The tool uses aggregated HIV surveillance data or case-based data. Data adjusted by the Accuracy tool can thereafter be used as input data for this tool. When data on these parameters are provided, the tool also accounts for mortality and migration."),r.createElement("p",null,"A complete instruction manual will guide you through the tool. The ",r.createElement("a",{href:"#"},"manual")," can also be consulted to interpret the outputs and to aid in the selection of some parameters using clear and well instructed examples.")),i=r.createElement(r.Fragment,null,r.createElement("p",null,"The two tools were combined into one flexible tool that manages all inputs, adjustments and outputs in one simple workflow. After uploading HIV cased-based data, the data can be initially adjusted for missing information and/or reporting delay and then automatically used as input data to the modelling tool, where estimates of HIV incidence, prevalence and the undiagnosed number of people living with HIV can be made."));return r.createElement(_.Z,{container:!0,direction:"row",justify:"space-evenly",alignItems:"baseline"},r.createElement(_.Z,{item:!0,xs:12},r.createElement(h.Z,{width:"50%",m:"auto",p:5},r.createElement("p",null,"HIV continues to be of significant public health importance in the European Union as well as globally. To evaluate and direct prevention efforts, it is crucial to understand the pattern of new HIV infections, or HIV incidence, among groups most at risk of infection. It is also important to estimate the size of the total population of persons living with HIV, including those that are not yet diagnosed, in order to understand the burden of HIV and the need for antiretroviral treatment and other HIV-related care. Accurate surveillance data are crucial to achieve reliable parameter estimates."),r.createElement("p",null,"The ECDC HIV Modelling Platform provides a set of tools to support users to obtain reliable parameter estimates to appropriately direct and evaluate public health responses."))),r.createElement(_.Z,{item:!0,xs:3},r.createElement(j,{title:"Accuracy",description:"Adjust case-based data for missing values and reporting delay",moreText:n,image:"www/img/accuracy.png",onClick:a})),r.createElement(_.Z,{item:!0,xs:3},r.createElement(j,{title:"Modelling",description:"Estimate number of PLHIV and incidence",moreText:l,image:"www/img/modelling.png",onClick:a})),r.createElement(_.Z,{item:!0,xs:3},r.createElement(j,{title:"All-in-one",description:"Accuracy adjustements and modelling integrated in one tool",moreText:i,image:"www/img/all-in-one.png",onClick:a})))};var B=a(8737);function U(){return(U=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}const V=e=>{const{children:t,...a}=e;return r.createElement(p.Z,U({component:"div",role:"tabpanel",style:{flexGrow:1}},a),t)};var H=a(7099),G=a(8386),W=a(5792),z=a(9596),Q=a(5581),J=a(2506),q=a(3238),K=a(4191);function X(){return(X=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}const ee=(0,d.Z)((()=>({root:{color:"white"}}))),te=e=>{const t=ee(),{children:a,...n}=e;return r.createElement(R.Z,X({variant:"contained",color:"primary",component:"span",className:t.root},n),a)};var ae=a(6884);const re=(0,d.Z)((()=>({root:{marginTop:10,marginBottom:10,height:10}}))),ne=e=>{const{progress:t}=e;if(C(t))return null;const a=re();return r.createElement(ae.Z,{variant:"determinate",value:100*t,color:"secondary",className:a.root})};var le=a(6327);function ie(){return(ie=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}const se=e=>{const{valid:t,msg:a,...n}=e;if(C(t))return null;const l=t?"success":"error";return r.createElement(le.Z,ie({severity:l},n,{style:{marginTop:10}}),a)},oe=(e,t=2)=>{if(C(e))return"";if(0===e)return"0 Bytes";const a=t<0?0:t,r=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,r)).toFixed(a))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][r]},me=(0,d.Z)({header:{width:142,fontWeight:"bold"},content:{maxWidth:0,overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"}}),ce=(0,l.Pi)((e=>{const{appMgr:t}=e,a=me();return r.createElement(_.Z,{container:!0,spacing:2},r.createElement(_.Z,{item:!0,xs:12},r.createElement(h.Z,{display:"flex",justifyContent:"flex-end"},r.createElement(R.Z,{size:"small",color:"primary",disabled:!t.uiStateMgr.summaryPageEnabled,onClick:()=>t.uiStateMgr.setActivePageId(2)},"Next step"))),r.createElement(_.Z,{item:!0,xs:12},r.createElement(p.Z,{variant:"h6"},"Upload case-based data")),r.createElement(_.Z,{item:!0,xs:2},r.createElement("input",{style:{display:"none"},id:"caseUploadBtn",className:"uploadBtn",type:"file",onChange:e=>t.caseBasedDataMgr.uploadData(e.target)}),r.createElement(H.ZP,{title:"Select case-based data file"},r.createElement("label",{htmlFor:"caseUploadBtn"},r.createElement(te,{style:{marginBottom:6}},r.createElement(K.Z,null)," Upload data"))),r.createElement(H.ZP,{title:"Remove case-based data from analysis"},r.createElement(R.Z,{style:{marginBottom:6,marginLeft:20},color:"primary",disabled:!t.uiStateMgr.caseBasedDataUnloadEnabled},"Unload data")),r.createElement(p.Z,{variant:"body2",color:"textSecondary"},"Maximum file size: 100MB",r.createElement("br",null),"Supported files types: rds, txt, csv, xls, xlsx (uncompressed and zip archives)"),r.createElement(ne,{progress:t.caseBasedDataMgr.uploadProgress}),r.createElement(se,{valid:t.caseBasedDataMgr.actionValid,msg:t.caseBasedDataMgr.actionMessage})),r.createElement(_.Z,{item:!0,xs:10},!t.caseBasedDataMgr.actionValid&&r.createElement(W.Z,{style:{color:"#eee",fontSize:600}}),t.caseBasedDataMgr.actionValid&&r.createElement(q.Z,{style:{padding:10}},r.createElement(p.Z,{variant:"overline"},"Uploaded file details"),r.createElement(_.Z,{container:!0,spacing:2},r.createElement(_.Z,{item:!0,xs:6},r.createElement(G.Z,null,r.createElement(z.Z,null,r.createElement(J.Z,{hover:!0},r.createElement(Q.Z,{className:a.header},"File name"),r.createElement(Q.Z,{className:a.content},t.caseBasedDataMgr.fileName)),r.createElement(J.Z,{hover:!0},r.createElement(Q.Z,{className:a.header},"File path"),r.createElement(Q.Z,{className:a.content},t.caseBasedDataMgr.filePath)),r.createElement(J.Z,{hover:!0},r.createElement(Q.Z,{className:a.header},"File size"),r.createElement(Q.Z,{className:a.content},oe(t.caseBasedDataMgr.fileSize))),r.createElement(J.Z,{hover:!0},r.createElement(Q.Z,{className:a.header},"File type"),r.createElement(Q.Z,{className:a.content},t.caseBasedDataMgr.fileType)),r.createElement(J.Z,{hover:!0},r.createElement(Q.Z,{className:a.header},"Number of records"),r.createElement(Q.Z,{className:a.content},t.caseBasedDataMgr.recordCount))))),r.createElement(_.Z,{item:!0,xs:6},r.createElement(G.Z,null,r.createElement(z.Z,null,r.createElement(J.Z,{hover:!0},r.createElement(Q.Z,{className:a.header},"Column names")),r.createElement(J.Z,{hover:!0},r.createElement(Q.Z,{style:{whiteSpace:"normal"},className:a.content},r.createElement("div",{style:{overflow:"auto",maxHeight:164}},t.caseBasedDataMgr.columnNamesString))))))))))}));var de=a(1268),ue=a(211),ge=a(9551),pe=a(7948),he=a(2858),Ee=a(4333),Me=a(3450),ye=a(6706),De=a(9535),be=a(5720);const Se=(0,l.Pi)((e=>{const{i:t,isSelected:a,onSelectClick:n,grouping:l,appMgr:i}=e,s=i.origGroupMgr.unusedOrigins,o=l.origin.concat(s);return r.createElement(J.Z,{hover:!0,role:"checkbox"},r.createElement(Q.Z,{padding:"checkbox"},r.createElement(pe.Z,{inputProps:{"aria-labelledby":`labelId${t}`},color:"primary",checked:a,onClick:n})),r.createElement(Q.Z,{id:`labelId${t}`,scope:"row",padding:"none"},r.createElement(De.Z,{style:{width:"100%",fontSize:"0.75rem"},value:l.name,onChange:e=>{i.origGroupMgr.setGroupName(t,e.target.value)}})),r.createElement(Q.Z,{style:{padding:"4px 16px 0px 16px",maxWidth:300}},r.createElement(ge.Z,{multiple:!0,renderValue:e=>r.createElement("div",{style:{display:"flex",flexWrap:"wrap"}},e.map((e=>r.createElement(be.Z,{key:e,label:e,style:{margin:2}})))),value:l.origin,style:{width:"100%",fontSize:"0.75rem"},onChange:e=>{i.origGroupMgr.setGroupOrigin(t,e.target.value)},disableUnderline:!0},o.map(((e,t)=>r.createElement(he.Z,{key:t,value:e,dense:!0},e))))),r.createElement(Q.Z,{align:"right"},l.groupCount))})),Ze=e=>{const{selectedCount:t,onAddClick:a,onDeleteClick:n,addDisabled:l}=e,i=0===t;return r.createElement(g.Z,null,r.createElement(p.Z,{variant:"subtitle1",component:"div",style:{flex:"1 1 100%"}},t," selected"),r.createElement(R.Z,{color:"primary",disabled:i,onClick:n},"Delete"),r.createElement(R.Z,{color:"primary",disabled:l,onClick:a},"Add"))},fe=(0,l.Pi)((e=>{const{appMgr:t}=e,[a,n]=r.useState([]),l=t.origGroupMgr.distributionArray,i=t.origGroupMgr.groupingsJS,s=e=>t=>{const r=a.indexOf(e);let l=[];-1===r?l=l.concat(a,e):0===r?l=l.concat(a.slice(1)):r===a.length-1?l=l.concat(a.slice(0,-1)):r>0&&(l=l.concat(a.slice(0,r),a.slice(r+1))),n(l)},o=i.length,m=a.length,c=e=>-1!==a.indexOf(e);return r.createElement(q.Z,{style:{padding:10}},r.createElement(_.Z,{container:!0,spacing:2},r.createElement(_.Z,{item:!0,xs:3},r.createElement(p.Z,{variant:"overline"},"Distribution of region of origin"),r.createElement(G.Z,{size:"small",style:{backgroundColor:"rgba(0, 0, 0, 0.02)"}},r.createElement(ue.Z,null,r.createElement(J.Z,null,r.createElement(Q.Z,null,"FullRegionOfOrigin"),r.createElement(Q.Z,{align:"right"},"Count"))),r.createElement(z.Z,null,l.map(((e,t)=>r.createElement(J.Z,{key:t},r.createElement(Q.Z,null,e.origin),r.createElement(Q.Z,{align:"right"},e.count))))))),r.createElement(_.Z,{item:!0,xs:9},r.createElement(p.Z,{variant:"overline"},"Migrant variable regrouping"),r.createElement(Ee.Z,{style:{width:"100%",fontSize:"0.75rem"}},r.createElement(ye.Z,null,"Preset"),r.createElement(ge.Z,{value:t.origGroupMgr.type,onChange:e=>{t.inputValueSet("groupingPresetSelect",e.target.value),t.origGroupMgr.setType(e.target.value)}},r.createElement(he.Z,{value:"REPCOUNTRY + UNK + OTHER",dense:!0},"REPCOUNTRY + UNK + OTHER"),r.createElement(he.Z,{value:"REPCOUNTRY + UNK + SUBAFR + OTHER",dense:!0},"REPCOUNTRY + UNK + SUBAFR + OTHER"),r.createElement(he.Z,{value:"REPCOUNTRY + UNK + 3 most prevalent regions + OTHER",dense:!0},"REPCOUNTRY + UNK + 3 most prevalent regions + OTHER"),r.createElement(he.Z,{value:"Custom",dense:!0},"Custom")),r.createElement(Me.Z,null,"Select regrouping preset")),r.createElement(G.Z,null,r.createElement(ue.Z,null,r.createElement(J.Z,null,r.createElement(Q.Z,{padding:"checkbox"},r.createElement(pe.Z,{inputProps:{"aria-label":"select all"},color:"primary",onClick:e=>{if(e.target.checked){const e=i.map(((e,t)=>t));n(e)}else n([])},checked:o>0&&m===o})),r.createElement(Q.Z,{padding:"none"},"GroupedRegionOfOrigin"),r.createElement(Q.Z,{width:"60%"},"FullRegionOfOrigin"),r.createElement(Q.Z,{align:"right",width:"10%"},"Count"))),r.createElement(z.Z,null,i.map(((e,a)=>r.createElement(Se,{key:a,i:a,grouping:e,appMgr:t,isSelected:c(a),onSelectClick:s(a)}))))),r.createElement(Ze,{selectedCount:m,onAddClick:()=>{t.origGroupMgr.addEmptyGrouping()},onDeleteClick:()=>{t.origGroupMgr.removeGroupings(a),n([])}}))))})),Ce=(0,l.Pi)((e=>{const{appMgr:t}=e;return r.createElement(_.Z,{container:!0,spacing:2},r.createElement(_.Z,{item:!0,xs:12},r.createElement(p.Z,{variant:"h6"},"Migrant variable regrouping")),r.createElement(_.Z,{item:!0,xs:2},r.createElement(te,{style:{marginBottom:6},onClick:()=>t.origGroupMgr.applyGroupings()},r.createElement(de.Z,null)," Apply regrouping"),r.createElement(p.Z,{variant:"body2",color:"textSecondary"},"Migrant variable can be created by grouping regions.",r.createElement("br",null),"Choose preset or define custom grouping and press 'Apply regrouping' button."),r.createElement(se,{valid:t.origGroupMgr.actionValid,msg:t.origGroupMgr.actionMessage})),r.createElement(_.Z,{item:!0,xs:10},r.createElement(fe,e)))}));var ve=a(5434);const xe=(0,l.Pi)((e=>{const{appMgr:t}=e;let a=[];null!==t.caseBasedDataMgr.columnNames&&(a=t.caseBasedDataMgr.columnNames.slice().sort().map((e=>r.createElement(he.Z,{key:e,value:e,dense:!0},e))));const n=e=>a=>{t.attrMappingMgr.setDefVal(e,a.target.value)},l=t.attrMappingMgr.mapping.map(((e,l)=>{return r.createElement(J.Z,{hover:!0,key:l},r.createElement(Q.Z,null,`${l+1}.`),r.createElement(Q.Z,null,e.attribute),r.createElement(Q.Z,{style:{padding:"4px 16px 0px 16px"}},r.createElement(ge.Z,{style:{width:"100%",fontSize:"0.75rem"},value:e.origColName||"",onChange:(i=e.attribute,e=>{t.attrMappingMgr.setOrigCol(i,e.target.value)}),disableUnderline:!0},r.createElement(he.Z,{value:"",dense:!0}," "),a)),r.createElement(Q.Z,{style:{padding:"4px 16px 0px 16px"}},r.createElement(De.Z,{style:{width:"100%",fontSize:"0.75rem"},onChange:n(e.attribute),disabled:!!e.origColName})));var i}));return r.createElement(_.Z,{container:!0,spacing:2},r.createElement(_.Z,{item:!0,xs:12},r.createElement(p.Z,{variant:"h6"},"Attribute mapping")),r.createElement(_.Z,{item:!0,xs:2},r.createElement(te,{style:{marginBottom:6},onClick:()=>t.attrMappingMgr.applyMapping(),disabled:!t.attrMappingMgr.actionValid},r.createElement(ve.Z,null)," Apply mapping"),r.createElement(p.Z,{variant:"body2",color:"textSecondary"},"Input data must mapped to internal attributes.",r.createElement("br",null),"Adjust mapping and press 'Apply mapping' button."),r.createElement(se,{valid:t.attrMappingMgr.actionValid,msg:t.attrMappingMgr.actionMessage})),r.createElement(_.Z,{item:!0,xs:10},r.createElement(q.Z,{style:{padding:10}},r.createElement(p.Z,{variant:"overline"},"Attribute mapping"),r.createElement(_.Z,{container:!0,spacing:2},r.createElement(G.Z,null,r.createElement(ue.Z,null,r.createElement(J.Z,null,r.createElement(Q.Z,{width:"5%"},"Idx"),r.createElement(Q.Z,{width:"25%"},"Attribute"),r.createElement(Q.Z,{width:"40%"},"Uploaded data column"),r.createElement(Q.Z,{width:"30%"},"Override value"))),r.createElement(z.Z,null,l))))))})),Pe=(0,l.Pi)((e=>{const{appMgr:t}=e,a=r.createElement(B.Z,{light:!0,style:{margin:"30px 0"}});return r.createElement(V,null,r.createElement(ce,e),t.uiStateMgr.caseBasedAttrMappingEnabled&&r.createElement(r.Fragment,null,a,r.createElement(xe,e)),t.uiStateMgr.caseBasedOrigGroupingEnabled&&r.createElement(r.Fragment,null,a,r.createElement(Ce,e)))}));var Ie=a(4560);const Ae=(0,d.Z)({header:{width:142,fontWeight:"bold"},content:{maxWidth:0,overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"}}),Re=(0,l.Pi)((e=>{const{appMgr:t}=e,a=Ae();return r.createElement(V,null,r.createElement(_.Z,{container:!0,spacing:2},r.createElement(_.Z,{item:!0,xs:12},r.createElement(h.Z,{display:"flex",justifyContent:"flex-end"},r.createElement(R.Z,{size:"small",color:"primary",disabled:!t.uiStateMgr.modellingPageEnabled,onClick:()=>t.uiStateMgr.setActivePageId(4)},"Next step"))),r.createElement(_.Z,{item:!0,xs:12},r.createElement(p.Z,{variant:"h6"},"Upload aggregated data")),r.createElement(_.Z,{item:!0,xs:2},r.createElement("input",{style:{display:"none"},id:"aggrUploadBtn",className:"uploadBtn",type:"file",onChange:e=>t.aggrDataMgr.uploadData(e.target)}),r.createElement(H.ZP,{title:"Select aggregated data file"},r.createElement("label",{htmlFor:"aggrUploadBtn"},r.createElement(te,{style:{marginBottom:6}},r.createElement(K.Z,null)," Upload data"))),r.createElement(H.ZP,{title:"Remove aggregated data from analysis"},r.createElement(R.Z,{style:{marginBottom:6,marginLeft:20},color:"primary",disabled:!t.uiStateMgr.aggrDataUnloadEnabled},"Unload data")),r.createElement(p.Z,{variant:"body2",color:"textSecondary"},"Maximum file size: 100MB",r.createElement("br",null),"Supported files types: csv (zip archives)"),r.createElement(ne,{progress:t.aggrDataMgr.fileUploadProgress}),r.createElement(se,{valid:t.aggrDataMgr.actionValid,msg:t.aggrDataMgr.actionMessage})),r.createElement(_.Z,{item:!0,xs:10},!t.aggrDataMgr.actionValid&&r.createElement(Ie.Z,{style:{color:"#eee",fontSize:600}}),t.aggrDataMgr.actionValid&&r.createElement(q.Z,{style:{padding:10}},r.createElement(p.Z,{variant:"overline"},"Uploaded file details"),r.createElement(_.Z,{container:!0,spacing:2},r.createElement(_.Z,{item:!0,xs:6},r.createElement(G.Z,null,r.createElement(z.Z,null,r.createElement(J.Z,{hover:!0},r.createElement(Q.Z,{className:a.header},"File name"),r.createElement(Q.Z,{className:a.content},t.aggrDataMgr.fileName)),r.createElement(J.Z,{hover:!0},r.createElement(Q.Z,{className:a.header},"File path"),r.createElement(Q.Z,{className:a.content},t.aggrDataMgr.filePath)),r.createElement(J.Z,{hover:!0},r.createElement(Q.Z,{className:a.header},"File size"),r.createElement(Q.Z,{className:a.content},oe(t.aggrDataMgr.fileSize))),r.createElement(J.Z,{hover:!0},r.createElement(Q.Z,{className:a.header},"File type"),r.createElement(Q.Z,{className:a.content},t.aggrDataMgr.fileType))))),r.createElement(_.Z,{item:!0,xs:6},r.createElement(G.Z,null,r.createElement(z.Z,null,r.createElement(J.Z,{hover:!0},r.createElement(Q.Z,{className:a.header},"Data names")),r.createElement(J.Z,{hover:!0},r.createElement(Q.Z,{style:{whiteSpace:"normal"},className:a.content},r.createElement("div",{style:{overflow:"auto",maxHeight:164}},t.aggrDataMgr.dataNamesString))),r.createElement(J.Z,{hover:!0},r.createElement(Q.Z,{className:a.header},"Population names")),r.createElement(J.Z,{hover:!0},r.createElement(Q.Z,{style:{whiteSpace:"normal"},className:a.content},r.createElement("div",{style:{overflow:"auto",maxHeight:164}},t.aggrDataMgr.populationNamesString)))))))))))})),Ne=(0,l.Pi)((e=>{const{appMgr:t}=e,a=t.uiStateMgr.activeSubPageId;return r.createElement(r.Fragment,null,0===a&&r.createElement(Pe,e),1===a&&r.createElement(Re,e))}));var _e=a(4224),Fe=a(51),Te=a(3312),we=a(8373),Ye=a(6887),Oe=a(6372),Le=a(8409),je=a(2426),ke=a(1404),Be=a(2376),Ue=a(7126),Ve=a(7272);Oe.D([je.N,ke.N,Be.N,Ue.N,Le.N,Ve.N]);const He=(0,l.Pi)((e=>{const t=r.useRef(null),{xAxisLabel:a,xCategories:n,maleData:l,femaleData:i}=e,s={textStyle:{fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif'},grid:{top:40,right:90,bottom:40,left:60},xAxis:{type:"category",name:a,data:n,nameLocation:"center",nameTextStyle:{padding:[10,0,0,0]},axisTick:{show:!1},axisLine:{show:!1}},yAxis:{type:"value",name:"Count",nameLocation:"center",nameGap:45,splitLine:{show:!1}},series:[{name:"Male",data:l,type:"bar",stack:!0,barCategoryGap:1,color:"#69b023"},{name:"Female",data:i,type:"bar",stack:!0,barCategoryGap:1,color:"#7bbcc0"}],animationEasing:"elasticOut",animationDelayUpdate:function(e){return 5*e},tooltip:{trigger:"axis"},legend:{orient:"vertical",right:0,top:"middle"}};return r.createElement(we.Z,{echarts:Ye,option:s,style:{height:"200px",width:"100%"},notMerge:!0,lazyUpdate:!0,opts:{},ref:t})})),Ge=(0,d.Z)({valueLabel:{"& *":{fontSize:9}}}),We=(0,l.Pi)((e=>{const{appMgr:t}=e,a=Ge();return r.createElement(r.Fragment,null,r.createElement(_.Z,{item:!0,xs:2},r.createElement(Fe.Z,{control:r.createElement(Te.Z,{checked:t.summaryDataMgr.diagYearPlotData.filter.applyInAdjustments,onChange:e=>t.summaryDataMgr.setDiagYearFilterApply(e.target.checked),color:"primary",size:"small"}),label:"Apply this data selection in adjustments"})),r.createElement(_.Z,{item:!0,xs:10},r.createElement(q.Z,{style:{padding:10}},r.createElement(p.Z,{variant:"overline"},"Diagnosis year"),r.createElement("div",{style:{padding:"40px 105px 0 65px"}},r.createElement(_e.Z,{min:t.summaryDataMgr.diagYearPlotData.filter.scaleMinYear,max:t.summaryDataMgr.diagYearPlotData.filter.scaleMaxYear,marks:!0,value:[t.summaryDataMgr.diagYearPlotData.filter.valueMinYear,t.summaryDataMgr.diagYearPlotData.filter.valueMaxYear],onChange:(e,a)=>{t.summaryDataMgr.setDiagYearFilterMinYear(a[0]),t.summaryDataMgr.setDiagYearFilterMaxYear(a[1])},valueLabelDisplay:"on",valueLabelFormat:e=>e.toFixed(),classes:{valueLabel:a.valueLabel},"aria-labelledby":"range-slider",getAriaLabel:e=>e.toFixed(),getAriaValueText:e=>e.toFixed(),color:"secondary"})),r.createElement(He,{xAxisLabel:"Diagnosis year",xCategories:t.summaryDataMgr.diagYearPlotData.chartCategories,maleData:t.summaryDataMgr.diagYearPlotData.chartData[0].data,femaleData:t.summaryDataMgr.diagYearPlotData.chartData[1].data}))))})),ze=e=>4*(e%1+.125).toFixed(3),Qe=e=>Math.floor(e)+"Q"+ze(e),Je=(0,d.Z)({valueLabel:{"& *":{fontSize:8}}}),$e=(0,l.Pi)((e=>{const{appMgr:t}=e,a=Je();return r.createElement(r.Fragment,null,r.createElement(_.Z,{item:!0,xs:2},r.createElement(Fe.Z,{control:r.createElement(Te.Z,{value:t.summaryDataMgr.notifQuarterPlotData.filter.applyInAdjustments,onChange:e=>t.summaryDataMgr.setNotifQuarterFilterApply(e.target.checked),color:"primary",size:"small"}),label:"Apply this data selection in adjustments"})),r.createElement(_.Z,{item:!0,xs:10},r.createElement(q.Z,{style:{padding:10}},r.createElement(p.Z,{variant:"overline"},"Notification quarter"),r.createElement("div",{style:{padding:"40px 105px 0 65px"}},r.createElement(_e.Z,{min:t.summaryDataMgr.notifQuarterPlotData.filter.scaleMinYear,max:t.summaryDataMgr.notifQuarterPlotData.filter.scaleMaxYear,step:null,marks:t.summaryDataMgr.notifQuarterSliderMarks,value:[t.summaryDataMgr.notifQuarterPlotData.filter.valueMinYear,t.summaryDataMgr.notifQuarterPlotData.filter.valueMaxYear],onChange:(e,a)=>{t.summaryDataMgr.setNotifQuarterFilterMinYear(a[0]),t.summaryDataMgr.setNotifQuarterFilterMaxYear(a[1])},valueLabelDisplay:"on",valueLabelFormat:e=>Qe(e),classes:{valueLabel:a.valueLabel},"aria-labelledby":"range-slider",color:"secondary"})),r.createElement(He,{xAxisLabel:"Notification quarter",xCategories:t.summaryDataMgr.notifQuarterChartCategories,maleData:t.summaryDataMgr.notifQuarterPlotData.chartData[0].data,femaleData:t.summaryDataMgr.notifQuarterPlotData.chartData[1].data}))))}));var qe=a(7693),Ke=a(7031),Xe=a(2866),et=a(7917),tt=a(3441),at=a(8651);const rt=(e,t=2)=>C(e)?"":Number(e).toLocaleString(void 0,{style:"percent",minimumFractionDigits:t});Oe.D([je.N,ke.N,Be.N,Ue.N,et.N,tt.N,at.N,Le.N,Xe.N,Ve.N]);const nt=e=>{const{xCategories:t,data1:a,data2:n,data3:l}=e,i={textStyle:{fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif'},grid:[{left:5,width:"30%",height:"347px",containLabel:!0},{left:"center",width:"30%",height:"347px",containLabel:!0},{right:15,width:"30%",height:"300px",containLabel:!0}],xAxis:[{gridIndex:0,type:"category",data:t,axisLabel:{rotate:45},axisTick:{show:!1},axisLine:{show:!1}},{gridIndex:1,type:"category",data:t,splitArea:{show:!0},axisLabel:{rotate:45},axisTick:{show:!1},axisLine:{show:!1}},{gridIndex:2,axisTick:{show:!1},axisLine:{show:!1},axisLabel:{formatter:e=>rt(e,0)}}],yAxis:[{id:"test",gridIndex:0,name:"Relative frequency of missing data",nameTextStyle:{align:"left"},nameLocation:"end",axisTick:{show:!1},axisLine:{show:!1},axisLabel:{formatter:e=>rt(e,0)}},{gridIndex:1,type:"category",name:"Missing data pattern",nameTextStyle:{align:"left"},nameLocation:"end",axisLabel:{show:!1},axisLine:{show:!1},axisTick:{show:!1}},{gridIndex:2,type:"category",axisTick:{show:!1},axisLine:{show:!1}},{gridIndex:2,position:"right",type:"category",data:l[2],axisTick:{show:!1},axisLine:{show:!1}}],visualMap:{type:"piecewise",seriesIndex:1,min:0,max:1,pieces:[{min:0,max:.9999999,color:"#ddd"},{min:.9999999,color:"#69b023"}],show:!1},series:[{type:"bar",barCategoryGap:1,color:"#cccccc",data:a,xAxisIndex:0,yAxisIndex:0,visualMap:!1},{type:"heatmap",data:n,xAxisIndex:1,yAxisIndex:1,itemStyle:{borderColor:"#fff",borderWidth:1},emphasis:{itemStyle:{borderColor:"#fff",borderWidth:1}}},{name:"Present",type:"bar",data:l[0],xAxisIndex:2,yAxisIndex:2,barCategoryGap:1,color:"#69b023",stack:!0},{name:"Missing",type:"bar",data:l[1],xAxisIndex:2,yAxisIndex:2,barCategoryGap:1,color:"#ccc",stack:!0}],tooltip:{trigger:"item"},toolbox:{show:!0,feature:{dataZoom:{yAxisIndex:"none"},saveAsImage:{pixelRatio:2,name:"MissingnessPattern",title:"Save"}}},legend:{}};return r.createElement(we.Z,{echarts:Ye,option:i,style:{height:"410px",width:"100%"},notMerge:!0,lazyUpdate:!0,opts:{}})};var lt=a(1919),it=a(2497);Oe.D([je.N,ke.N,Be.N,it.N,Ue.N,lt.N,Ve.N]);const st=(0,l.Pi)((e=>{const{yLabelName:t,xCategories:a,data:n}=e,l={textStyle:{fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif'},grid:{top:40,right:15,bottom:40,left:60},xAxis:{type:"category",name:"Diagnosis year",data:a,nameLocation:"center",nameTextStyle:{padding:[10,0,0,0]},boundaryGap:!1},yAxis:{type:"value",name:t,nameLocation:"center",nameGap:45,axisLabel:{formatter:e=>rt(e,0)}},series:[{name:n[0].name,type:"line",data:n[0].data},{name:n[1].name,type:"line",data:n[1].data},{name:n[2].name,type:"line",data:n[2].data},{name:n[3].name,type:"line",data:n[3].data}],tooltip:{trigger:"axis"},toolbox:{show:!0,feature:{dataZoom:{},restore:{},saveAsImage:{pixelRatio:2,name:"MissingnessDistribution",title:"Save"}}},legend:{}};return r.createElement(we.Z,{echarts:Ye,option:l,notMerge:!0,lazyUpdate:!0,opts:{}})})),ot=(0,l.Pi)((e=>{const{appMgr:t}=e;return r.createElement(r.Fragment,null,r.createElement(_.Z,{item:!0,xs:12},r.createElement(p.Z,{variant:"h6"},"Missing data summary: key variables")),r.createElement(_.Z,{item:!0,xs:2},r.createElement(p.Z,{variant:"body2",color:"textSecondary"},"Percentages of cases for which the information was not available (missing) for one or more of the key variables: CD4 count, transmission category, migrant status or age."),r.createElement(Ee.Z,{component:"fieldset"},r.createElement(Ke.Z,{name:"missDataSelection",value:t.summaryDataMgr.missPlotSelection,onChange:e=>t.summaryDataMgr.setMissPlotSelection(e.target.value)},r.createElement(Fe.Z,{value:"all",control:r.createElement(qe.Z,{color:"primary",size:"small"}),label:"All"}),r.createElement(Fe.Z,{value:"female",control:r.createElement(qe.Z,{color:"primary",size:"small"}),label:"Female"}),r.createElement(Fe.Z,{value:"male",control:r.createElement(qe.Z,{color:"primary",size:"small"}),label:"Male"})))),r.createElement(_.Z,{item:!0,xs:10},r.createElement(q.Z,{style:{padding:10}},r.createElement(_.Z,{container:!0},r.createElement(_.Z,{item:!0,xs:12},r.createElement(nt,{xCategories:t.summaryDataMgr.missPlotData.plot1.chartCategories,data1:t.summaryDataMgr.missPlot1Series,data2:t.summaryDataMgr.missPlot2Series,data3:t.summaryDataMgr.missPlot3Series})),r.createElement(_.Z,{item:!0,xs:12},r.createElement(st,{yLabelName:"Proportion of missing values",xCategories:t.summaryDataMgr.missPlot4Categories,data:t.summaryDataMgr.missPlot4Series}))))))}));var mt=a(6267);Oe.D([je.N,ke.N,Be.N,it.N,Ue.N,mt.N,lt.N,Ve.N]);const ct=(0,l.Pi)((e=>{const{yLabelName:t,data:a,q95:n}=e,l={textStyle:{fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif'},grid:{top:40,right:10,bottom:40,left:60},xAxis:{type:"value",name:"Notification time in quarters of the year",nameLocation:"center",nameTextStyle:{padding:[10,0,0,0]},boundaryGap:!1},yAxis:{type:"value",name:t,nameLocation:"center",nameGap:45},series:[{name:a[0].name,type:"line",data:a[0].data,showSymbol:!1,areaStyle:{opacity:.4},markLine:{data:[[{name:`95% of cases reported by ${n} quarters`,xAxis:n,y:40},{xAxis:n,y:260}]],lineStyle:{color:"#69b023"},label:{position:"start",distance:10,formatter:"{a|{b}}",rich:{a:{color:"#fff",backgroundColor:"#69b023",padding:5,borderRadius:5}}}}}],tooltip:{trigger:"axis"},toolbox:{show:!0,feature:{dataZoom:{},restore:{},saveAsImage:{pixelRatio:2,name:"ReportingDelays",title:"Save"}}}};return r.createElement(we.Z,{echarts:Ye,option:l,notMerge:!0,lazyUpdate:!0,opts:{}})})),dt=(0,l.Pi)((e=>{const{appMgr:t}=e;return r.createElement(r.Fragment,null,r.createElement(_.Z,{item:!0,xs:12},r.createElement(p.Z,{variant:"h6"},"Reporting delays summary")),r.createElement(_.Z,{item:!0,xs:2},r.createElement(p.Z,{variant:"body2",color:"textSecondary"},"Average reporting delay for cases notified within a quarter and the upper bound for typical average delay values. Quarters when the average delay exceeds the upper bound may indicate cleaning events in surveillance."),r.createElement(Ee.Z,{component:"fieldset"},r.createElement(Ke.Z,{name:"repDelDataSelection",value:t.summaryDataMgr.repDelPlotSelection,onChange:e=>t.summaryDataMgr.setRepDelPlotSelection(e.target.value)},r.createElement(Fe.Z,{value:"all",control:r.createElement(qe.Z,{color:"primary",size:"small"}),label:"All"}),r.createElement(Fe.Z,{value:"female",control:r.createElement(qe.Z,{color:"primary",size:"small"}),label:"Female"}),r.createElement(Fe.Z,{value:"male",control:r.createElement(qe.Z,{color:"primary",size:"small"}),label:"Male"})))),r.createElement(_.Z,{item:!0,xs:10},r.createElement(q.Z,{style:{padding:10}},r.createElement(ct,{yLabelName:"Proportion of reported with delay",data:t.summaryDataMgr.repDelPlot.series,q95:t.summaryDataMgr.repDelPlot.q95}))))})),ut=(0,l.Pi)((e=>{const{appMgr:t}=e;return r.createElement(V,null,r.createElement(_.Z,{container:!0,spacing:2},r.createElement(_.Z,{item:!0,xs:12},r.createElement(h.Z,{display:"flex",justifyContent:"flex-end"},r.createElement(R.Z,{size:"small",color:"primary",disabled:!t.uiStateMgr.caseBasedAdjustmentsStageEnabled,onClick:()=>t.uiStateMgr.setActiveStepId(3)},"Next step"))),r.createElement(_.Z,{item:!0,xs:12},r.createElement(p.Z,{variant:"h6"},"Select case-based data for summary")),r.createElement(We,e),r.createElement($e,e),r.createElement(_.Z,{item:!0,xs:12},r.createElement(p.Z,{variant:"body1"},"Number of records in the selection: ",t.summaryDataMgr.selectedCount," (out of ",t.summaryDataMgr.totalCount,", ",rt(t.summaryDataMgr.selectedCount/t.summaryDataMgr.totalCount),")")),r.createElement(_.Z,{item:!0,xs:12},r.createElement(B.Z,{light:!0,style:{margin:"30px 0"}})),r.createElement(ot,e),r.createElement(_.Z,{item:!0,xs:12},r.createElement(B.Z,{light:!0,style:{margin:"30px 0"}})),r.createElement(dt,e)))})),gt=()=>r.createElement(r.Fragment,null,r.createElement(p.Z,{variant:"overline"},"No parameters"),r.createElement(p.Z,null,"No Multiple Imputations adjustment selected"));var pt=a(9130);const ht=(0,l.Pi)((e=>{const{appMgr:t}=e;return r.createElement(r.Fragment,null,r.createElement(p.Z,{variant:"overline"},"Joint Modelling - JOMO parameters"),r.createElement("form",{noValidate:!0,autoComplete:"off"},r.createElement(_.Z,{container:!0,spacing:2},r.createElement(_.Z,{item:!0,xs:4},r.createElement(A.Z,{label:"Number of imputations",helperText:"Type the number of data sets to input",type:"number",value:t.adjustMgr.miJomoSettings.nimp,onChange:e=>t.adjustMgr.setMIJomoNimp(e.target.value),onBlur:e=>t.adjustMgr.setMIJomoNimp(Math.min(Math.max(e.target.value,2),50)),fullWidth:!0,InputProps:{inputProps:{min:2,max:50}},style:{marginBottom:20}})),r.createElement(_.Z,{item:!0,xs:4},r.createElement(A.Z,{label:"Number of burn-in iterations",helperText:"Type the number of inital iterations to skip before imputing",type:"number",value:t.adjustMgr.miJomoSettings.nburn,onChange:e=>t.adjustMgr.setMIJomoNburn(e.target.value),onBlur:e=>t.adjustMgr.setMIJomoNburn(Math.min(Math.max(e.target.value,100),1e4)),fullWidth:!0,InputProps:{inputProps:{min:100,max:1e4}},style:{marginBottom:20}})),r.createElement(_.Z,{item:!0,xs:4},r.createElement(A.Z,{label:"Number of iterations between two successive imputations",type:"number",value:t.adjustMgr.miJomoSettings.nbetween,onChange:e=>t.adjustMgr.setMIJomoNbetween(e.target.value),onBlur:e=>t.adjustMgr.setMIJomoNbetween(Math.min(Math.max(e.target.value,100),1e4)),fullWidth:!0,InputProps:{inputProps:{min:100,max:1e4}},style:{marginBottom:20}})),r.createElement(_.Z,{item:!0,xs:4},r.createElement(p.Z,{id:"discrete-slider",gutterBottom:!0},"Number of degrees of freedom for spline of diagnosis calendar year"),r.createElement(_e.Z,{min:3,max:5,value:t.adjustMgr.miJomoSettings.nsdf,onChange:(e,a)=>t.adjustMgr.setMIJomoNsdf(a),marks:[{value:3,label:3},{value:4,label:4},{value:5,label:5}]})),r.createElement(_.Z,{item:!0,xs:4},r.createElement(pt.Z,{row:!0},r.createElement(Fe.Z,{control:r.createElement(pe.Z,{checked:t.adjustMgr.miJomoSettings.imputeRD,onChange:(e,a)=>t.adjustMgr.setMIJomoImputeRD(a),name:"check",color:"primary"}),label:"Impute reporting delays inputs"}))),r.createElement(_.Z,{item:!0,xs:12},r.createElement(R.Z,{color:"primary",onClick:e=>t.adjustMgr.restoreMIDefaults("jomo")},"Restore defaults")))))})),Et=(0,l.Pi)((e=>{const{appMgr:t}=e;return r.createElement(r.Fragment,null,r.createElement(p.Z,{variant:"overline"},"Chained Equations - MICE parameters"),r.createElement("form",{noValidate:!0,autoComplete:"off"},r.createElement(_.Z,{container:!0,spacing:2},r.createElement(_.Z,{item:!0,xs:4},r.createElement(A.Z,{label:"Number of imputations",helperText:"Type the number of data sets to input",type:"number",value:t.adjustMgr.miMiceSettings.nimp,onChange:e=>t.adjustMgr.setMIMiceNimp(e.target.value),onBlur:e=>t.adjustMgr.setMIMiceNimp(Math.min(Math.max(e.target.value,2),50)),fullWidth:!0,InputProps:{inputProps:{min:2,max:50}},style:{marginBottom:20}})),r.createElement(_.Z,{item:!0,xs:4},r.createElement(A.Z,{label:"Number of mice iterations",helperText:"Type the number of mice iterations",type:"number",value:t.adjustMgr.miMiceSettings.nit,onChange:e=>t.adjustMgr.setMIMiceNit(e.target.value),onBlur:e=>t.adjustMgr.setMIMiceNit(Math.min(Math.max(e.target.value,2),50)),fullWidth:!0,InputProps:{inputProps:{min:2,max:50}},style:{marginBottom:20}})),r.createElement(_.Z,{item:!0,xs:4}),r.createElement(_.Z,{item:!0,xs:4},r.createElement(p.Z,{id:"discrete-slider",gutterBottom:!0},"Number of degrees of freedom for spline of diagnosis calendar year"),r.createElement(_e.Z,{min:3,max:5,value:t.adjustMgr.miMiceSettings.nsdf,onChange:(e,a)=>t.adjustMgr.setMIMiceNsdf(a),marks:[{value:3,label:3},{value:4,label:4},{value:5,label:5}]})),r.createElement(_.Z,{item:!0,xs:4},r.createElement(pt.Z,{row:!0},r.createElement(Fe.Z,{control:r.createElement(pe.Z,{checked:t.adjustMgr.miMiceSettings.imputeRD,onChange:(e,a)=>t.adjustMgr.setMIMiceImputeRD(a),name:"check",color:"primary"}),label:"Impute reporting delays inputs"}))),r.createElement(_.Z,{item:!0,xs:12},r.createElement(R.Z,{color:"primary",onClick:e=>t.adjustMgr.restoreMIDefaults("mice")},"Restore defaults")))))})),Mt=(0,l.Pi)((e=>{const{appMgr:t}=e;return r.createElement(r.Fragment,null,r.createElement(_.Z,{item:!0,xs:2},"Multiple Imputations type:",r.createElement("br",null),r.createElement(Ee.Z,{component:"fieldset"},r.createElement(Ke.Z,{name:"miAdjustType",value:t.adjustMgr.miAdjustType,onChange:e=>t.adjustMgr.setMIAdjustType(e.target.value)},r.createElement(Fe.Z,{value:"none",control:r.createElement(qe.Z,{color:"primary",size:"small"}),label:"None"}),r.createElement(Fe.Z,{value:"jomo",control:r.createElement(qe.Z,{color:"primary",size:"small"}),label:"Joint Modelling - JOMO"}),r.createElement(Fe.Z,{value:"mice",control:r.createElement(qe.Z,{color:"primary",size:"small"}),label:"Chained Equations - MICE"})))),r.createElement(_.Z,{item:!0,xs:10},r.createElement(q.Z,{style:{padding:10,minHeight:283}},"none"===t.adjustMgr.miAdjustType&&r.createElement(gt,null),"jomo"===t.adjustMgr.miAdjustType&&r.createElement(ht,e),"mice"===t.adjustMgr.miAdjustType&&r.createElement(Et,e))))})),yt=()=>r.createElement(r.Fragment,null,r.createElement(p.Z,{variant:"overline"},"No parameters"),r.createElement(p.Z,null,"No Reporting Delays adjustment selected")),Dt=(0,l.Pi)((e=>{const{appMgr:t}=e;return r.createElement(r.Fragment,null,r.createElement(p.Z,{variant:"overline"},"Reporting Delays - without trend parameters"),r.createElement("form",{noValidate:!0,autoComplete:"off"},r.createElement(_.Z,{container:!0,spacing:2},r.createElement(_.Z,{item:!0,xs:4},r.createElement(A.Z,{label:"Diagnosis start year",helperText:"Enter the start year for diagnosis",type:"number",value:t.adjustMgr.rdWithoutTrendSettings.startYear,onChange:e=>t.adjustMgr.setRDWithoutStartYear(e.target.value),onBlur:e=>t.adjustMgr.setRDWithoutStartYear(Math.min(Math.max(e.target.value,1975),2030)),fullWidth:!0,InputProps:{inputProps:{min:1975,max:2030}},style:{marginBottom:20}})),r.createElement(_.Z,{item:!0,xs:4},r.createElement(A.Z,{label:"Notification end year",helperText:"Enter the end year for notification",type:"number",value:t.adjustMgr.rdWithoutTrendSettings.endYear,onChange:e=>t.adjustMgr.setRDWithoutEndYear(e.target.value),onBlur:e=>t.adjustMgr.setRDWithoutEndYear(Math.min(Math.max(e.target.value,1975),2030)),fullWidth:!0,InputProps:{inputProps:{min:1975,max:2030}},style:{marginBottom:20}})),r.createElement(_.Z,{item:!0,xs:4},r.createElement(A.Z,{label:"Notification end quarter (integer between 1 and 4)",type:"number",value:t.adjustMgr.rdWithoutTrendSettings.endQrt,onChange:e=>t.adjustMgr.setRDWithoutEndQrt(e.target.value),onBlur:e=>t.adjustMgr.setRDWithoutEndQrt(Math.min(Math.max(e.target.value,1),4)),fullWidth:!0,InputProps:{inputProps:{min:1,max:4}},style:{marginBottom:20}})),r.createElement(_.Z,{item:!0,xs:4},"Stratify by:",r.createElement(pt.Z,{row:!0},r.createElement(Fe.Z,{control:r.createElement(pe.Z,{checked:t.adjustMgr.rdWithoutTrendSettings.stratGender,onChange:(e,a)=>t.adjustMgr.setRDWithoutStratGender(a),name:"check",color:"primary"}),label:"Gender"}),r.createElement(Fe.Z,{control:r.createElement(pe.Z,{checked:t.adjustMgr.rdWithoutTrendSettings.stratTrans,onChange:(e,a)=>t.adjustMgr.setRDWithoutStratTrans(a),name:"check",color:"primary"}),label:"Transmission"}),r.createElement(Fe.Z,{control:r.createElement(pe.Z,{checked:t.adjustMgr.rdWithoutTrendSettings.stratMigr,onChange:(e,a)=>t.adjustMgr.setRDWithoutStratMigr(a),name:"check",color:"primary"}),label:"Migration"}))),r.createElement(_.Z,{item:!0,xs:12},r.createElement(R.Z,{color:"primary",onClick:e=>t.adjustMgr.restoreRDDefaults("withoutTrend")},"Restore defaults")))))})),bt=(0,l.Pi)((e=>{const{appMgr:t}=e;return r.createElement(r.Fragment,null,r.createElement(p.Z,{variant:"overline"},"Reporting Delays - with trend parameters"),r.createElement("form",{noValidate:!0,autoComplete:"off"},r.createElement(_.Z,{container:!0,spacing:2},r.createElement(_.Z,{item:!0,xs:4},r.createElement(A.Z,{label:"Diagnosis start year",helperText:"Enter the start year for diagnosis",type:"number",value:t.adjustMgr.rdWithTrendSettings.startYear,onChange:e=>t.adjustMgr.setRDWithStartYear(e.target.value),onBlur:e=>t.adjustMgr.setRDWithStartYear(Math.min(Math.max(e.target.value,1975),2030)),fullWidth:!0,InputProps:{inputProps:{min:1975,max:2030}},style:{marginBottom:20}})),r.createElement(_.Z,{item:!0,xs:4},r.createElement(A.Z,{label:"Notification end year",helperText:"Enter the end year for notification",type:"number",value:t.adjustMgr.rdWithTrendSettings.endYear,onChange:e=>t.adjustMgr.setRDWithEndYear(e.target.value),onBlur:e=>t.adjustMgr.setRDWithEndYear(Math.min(Math.max(e.target.value,1975),2030)),fullWidth:!0,InputProps:{inputProps:{min:1975,max:2030}},style:{marginBottom:20}})),r.createElement(_.Z,{item:!0,xs:4},r.createElement(A.Z,{label:"Notification end quarter (integer between 1 and 4)",type:"number",value:t.adjustMgr.rdWithTrendSettings.endQrt,onChange:e=>t.adjustMgr.setRDWithEndQrt(e.target.value),onBlur:e=>t.adjustMgr.setRDWithEndQrt(Math.min(Math.max(e.target.value,1),4)),fullWidth:!0,InputProps:{inputProps:{min:1,max:4}},style:{marginBottom:20}})),r.createElement(_.Z,{item:!0,xs:4},"Stratify by:",r.createElement(pt.Z,{row:!0},r.createElement(Fe.Z,{control:r.createElement(pe.Z,{checked:t.adjustMgr.rdWithTrendSettings.stratGender,onChange:(e,a)=>t.adjustMgr.setRDWithStratGender(a),name:"check",color:"primary"}),label:"Gender"}),r.createElement(Fe.Z,{control:r.createElement(pe.Z,{checked:t.adjustMgr.rdWithTrendSettings.stratTrans,onChange:(e,a)=>t.adjustMgr.setRDWithStratTrans(a),name:"check",color:"primary"}),label:"Transmission"}),r.createElement(Fe.Z,{control:r.createElement(pe.Z,{checked:t.adjustMgr.rdWithTrendSettings.stratMigr,onChange:(e,a)=>t.adjustMgr.setRDWithStratMigr(a),name:"check",color:"primary"}),label:"Migration"}))),r.createElement(_.Z,{item:!0,xs:12},r.createElement(R.Z,{color:"primary",onClick:e=>t.adjustMgr.restoreRDDefaults("withTrend")},"Restore defaults")))))})),St=(0,l.Pi)((e=>{const{appMgr:t}=e;return r.createElement(r.Fragment,null,r.createElement(_.Z,{item:!0,xs:2},"Reporting Delays type:",r.createElement("br",null),r.createElement(Ee.Z,{component:"fieldset"},r.createElement(Ke.Z,{name:"rdAdjustType",value:t.adjustMgr.rdAdjustType,onChange:e=>t.adjustMgr.setRDAdjustType(e.target.value)},r.createElement(Fe.Z,{value:"none",control:r.createElement(qe.Z,{color:"primary",size:"small"}),label:"None"}),r.createElement(Fe.Z,{value:"withoutTrend",control:r.createElement(qe.Z,{color:"primary",size:"small"}),label:"Without trend"}),r.createElement(Fe.Z,{value:"withTrend",control:r.createElement(qe.Z,{color:"primary",size:"small"}),label:"With trend"})))),r.createElement(_.Z,{item:!0,xs:10},r.createElement(q.Z,{style:{padding:10,minHeight:263}},"none"===t.adjustMgr.rdAdjustType&&r.createElement(yt,null),"withoutTrend"===t.adjustMgr.rdAdjustType&&r.createElement(Dt,e),"withTrend"===t.adjustMgr.rdAdjustType&&r.createElement(bt,e))))})),Zt=(0,l.Pi)((e=>{const{appMgr:t}=e;return r.createElement(V,null,r.createElement(_.Z,{container:!0,spacing:2},r.createElement(_.Z,{item:!0,xs:12},r.createElement(h.Z,{display:"flex",justifyContent:"flex-end"},r.createElement(R.Z,{size:"small",color:"primary",disabled:!t.adjustMgr.adjustmentSelected,onClick:e=>t.uiStateMgr.setActivePageId(3,1)},"Next step"))),r.createElement(_.Z,{item:!0,xs:12},r.createElement(p.Z,{variant:"h6"},"Case-based data adjustments parameters")),r.createElement(Mt,e),r.createElement(St,e)))}));var ft=a(6346),Ct=a(9780),vt=a(1530);const xt=(0,d.Z)((()=>({root:{marginTop:10,marginBottom:10,height:10}}))),Pt=e=>{const{progress:t}=e;if(C(t))return null;const a=xt();return r.createElement(ae.Z,{color:"secondary",className:a.root})},It=(0,l.Pi)((e=>{const{appMgr:t}=e,[a,n]=r.useState(0);return r.createElement(V,null,r.createElement(_.Z,{container:!0,spacing:2},r.createElement(_.Z,{item:!0,xs:12},r.createElement(h.Z,{display:"flex",justifyContent:"flex-end"},r.createElement(R.Z,{size:"small",color:"primary",disabled:!t.uiStateMgr.reportsPageEnabled,onClick:e=>t.uiStateMgr.setActivePageId(4)},"Next step"))),r.createElement(_.Z,{item:!0,xs:12},r.createElement(p.Z,{variant:"h6"},"Case-based data adjustments run")),r.createElement(_.Z,{item:!0,xs:2},r.createElement(te,{onClick:()=>t.adjustMgr.runAdjustments(),disabled:!t.adjustMgr.adjustmentSelected||t.adjustMgr.adjustmentsRunInProgress},r.createElement(ft.Z,null)," Run adjustments"),r.createElement(R.Z,{onClick:()=>t.adjustMgr.cancelAdjustments(),color:"primary",style:{marginLeft:20},disabled:!t.adjustMgr.adjustmentsRunInProgress},"Cancel"),r.createElement(Pt,{progress:t.adjustMgr.adjustmentsRunProgress})),r.createElement(_.Z,{item:!0,xs:10},r.createElement(q.Z,{style:{padding:10}},r.createElement(Ct.Z,{value:a,onChange:(e,t)=>n(t),indicatorColor:"primary",textColor:"primary"},r.createElement(vt.Z,{label:"Run log",disabled:C(t.adjustMgr.adjustmentsRunLog)}),r.createElement(vt.Z,{label:"Diagnostics",disabled:C(t.adjustMgr.adjustmentsReport)})),0===a&&r.createElement(r.Fragment,null,r.createElement("pre",{dangerouslySetInnerHTML:{__html:t.adjustMgr.adjustmentsRunLog},style:{overflowX:"auto",fontSize:"0.75rem"}})),1===a&&r.createElement(r.Fragment,null,r.createElement("div",{dangerouslySetInnerHTML:{__html:t.adjustMgr.adjustmentsReport},style:{overflowX:"auto"}}))))))})),At=(0,l.Pi)((e=>{const{appMgr:t}=e,a=t.uiStateMgr.activeSubPageId;return r.createElement(r.Fragment,null,0===a&&r.createElement(Zt,e),1===a&&r.createElement(It,e))})),Rt=(e,t)=>((e,t,a)=>{a/=100;const r=t*Math.min(a,1-a)/100,n=t=>{const n=(t+e/30)%12,l=a-r*Math.max(Math.min(n-3,9-n,1),-1);return Math.round(255*l).toString(16).padStart(2,"0")};return`#${n(0)}${n(8)}${n(4)}`})(t,40+60*e,95-40*e),Nt=(0,l.Pi)((e=>{const{i:t,isSelected:a,onSelectClick:n,population:l,appMgr:i}=e;return r.createElement(J.Z,{hover:!0,role:"checkbox"},r.createElement(Q.Z,{padding:"checkbox"},r.createElement(pe.Z,{inputProps:{"aria-labelledby":`labelId${t}`},color:"primary",checked:a,onClick:n})),r.createElement(Q.Z,{style:{padding:"4px 16px 0px 16px",maxWidth:300}},r.createElement(ge.Z,{multiple:!0,renderValue:e=>r.createElement("div",{style:{display:"flex",flexWrap:"wrap"}},e.map((e=>r.createElement(be.Z,{key:e,label:e,style:{margin:2}})))),value:l.variables,style:{width:"100%",fontSize:"0.75rem"},onChange:e=>{i.popMgr.setPopulationVariables(t,e.target.value)},disableUnderline:!0},i.popMgr.availableVariables.map(((e,t)=>r.createElement(he.Z,{key:t,value:e.Name,dense:!0},`${e.Name} (${e.Code})`))))),r.createElement(Q.Z,null,r.createElement("div",{style:{display:"flex",flexWrap:"wrap"}},l.strata.map((e=>r.createElement(be.Z,{key:e.Combination,label:`${e.Combination} (${rt(e.Perc)})`,style:{margin:2,backgroundColor:`${Rt(e.Perc,214)}`}}))))))})),_t=(0,l.Pi)((e=>{const{appMgr:t}=e,[a,n]=r.useState([]),l=t.popMgr.populationsJS,i=e=>t=>{const r=a.indexOf(e);let l=[];-1===r?l=l.concat(a,e):0===r?l=l.concat(a.slice(1)):r===a.length-1?l=l.concat(a.slice(0,-1)):r>0&&(l=l.concat(a.slice(0,r),a.slice(r+1))),n(l)},s=l.length,o=a.length,m=e=>-1!==a.indexOf(e);return r.createElement(q.Z,null,r.createElement(G.Z,null,r.createElement(ue.Z,null,r.createElement(J.Z,null,r.createElement(Q.Z,{padding:"checkbox"},r.createElement(pe.Z,{inputProps:{"aria-label":"select all"},color:"primary",onClick:e=>{if(e.target.checked){const e=l.map(((e,t)=>t));n(e)}else n([])},checked:s>0&&o===s})),r.createElement(Q.Z,{width:"50%"},"Selected variables"),r.createElement(Q.Z,{width:"50%"},"Defined populations"))),r.createElement(z.Z,null,l.map(((e,a)=>r.createElement(Nt,{key:a,i:a,population:e,appMgr:t,isSelected:m(a),onSelectClick:i(a)}))))),r.createElement(Ze,{selectedCount:o,onAddClick:()=>{t.popMgr.addEmptyPopulation()},onDeleteClick:()=>{t.popMgr.removePopulations(a),n([])},addDisabled:!t.uiStateMgr.caseBasedOrigGroupingEnabled}))}));function Ft(){return(Ft=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}const Tt=(0,l.Pi)((e=>{const{onChange:t,validationFunc:a,helperText:n,...l}=e,[i,s]=r.useState(!1),[o,m]=r.useState(""),c=o||n;return r.createElement(A.Z,Ft({},l,{error:i,helperText:c,onChange:e=>{const{value:r}=e.target,l=a(r),i=l!==n,o=!i;s(i),m(l),t&&t(r,o)}}))})),wt=(0,d.Z)((()=>({textField:{"& .MuiInputBase-root":{fontSize:"0.75rem"}}}))),Yt=(0,l.Pi)((e=>{const{isSelected:t,onSelectClick:a,combination:n,appMgr:l}=e,i=wt(),s=(e,t)=>{t&&l.popCombMgr.setCombinationName(n.id,e)},o=e=>{l.popCombMgr.setCombinationCasePopulations(n.id,e.target.value)},m=e=>{l.popCombMgr.setCombinationAggrPopulations(n.id,e.target.value)},c=e=>{let t="";return""===e&&(t="Please, specify a unique name"),t};let d=null,u=null,g=null,p=null;return n.id===l.popCombMgr.combinationAllId?(u=n.name,g="All data available",p="All data available after selection above"):(d=r.createElement(pe.Z,{inputProps:{"aria-labelledby":`labelId${n.id}`},color:"primary",checked:t,onClick:a}),u=r.createElement(Tt,{value:n.name,validationFunc:c,onChange:s,helperText:"",style:{width:"100%"},className:i.textField}),g=r.createElement(ge.Z,{multiple:!0,renderValue:e=>r.createElement("div",{style:{display:"flex",flexWrap:"wrap"}},e.map((e=>r.createElement(be.Z,{key:e,label:e,style:{margin:2}})))),value:n.casePopulations,disabled:0===l.popMgr.definedPopulations.length,onChange:o,style:{width:"100%",fontSize:"0.75rem"},disableUnderline:!0},l.popMgr.definedPopulations.map(((e,t)=>r.createElement(he.Z,{key:t,value:e,dense:!0},e)))),p=r.createElement(ge.Z,{multiple:!0,renderValue:e=>r.createElement("div",{style:{display:"flex",flexWrap:"wrap"}},e.map((e=>r.createElement(be.Z,{key:e,label:e,style:{margin:2}})))),value:n.aggrPopulations,onChange:m,style:{width:"100%",fontSize:"0.75rem"},disableUnderline:!0},l.aggrDataMgr.populationNames.map(((e,t)=>r.createElement(he.Z,{key:t,value:e,dense:!0},e))))),r.createElement(J.Z,{hover:!0,role:"checkbox"},r.createElement(Q.Z,{padding:"checkbox"},d),r.createElement(Q.Z,{id:`labelId${n.id}`,scope:"row",style:{padding:"6px 4px 6px 0px"}},u),r.createElement(Q.Z,{style:{padding:"4px 4px 0px 16px"}},g),r.createElement(Q.Z,{style:{padding:"4px 4px 0px 16px"}},p))})),Ot=e=>(e=>Array.isArray(e))(e)?e:[e],Lt=(e,t)=>{t=Ot(t);return e.filter((e=>-1===t.indexOf(e)))},jt=(0,l.Pi)((e=>{const{appMgr:t}=e,[a,n]=r.useState([]),l=t.popCombMgr.combinationsArray,i=e=>()=>{let t=[];t=-1===a.indexOf(e)?t.concat(a,e):Lt(a,e),n(t)},s=l.length-1,o=a.length;return r.createElement(q.Z,null,r.createElement(G.Z,null,r.createElement(ue.Z,null,r.createElement(J.Z,null,r.createElement(Q.Z,{padding:"checkbox"},r.createElement(pe.Z,{inputProps:{"aria-label":"select all"},color:"primary",onClick:e=>{if(e.target.checked){const e=Lt(l.map((e=>e.id)),t.popCombMgr.combinationAllId);n(e)}else n([])},checked:s>0&&o===s})),r.createElement(Q.Z,{width:"30%",padding:"none"},"Combination name"),r.createElement(Q.Z,{width:"35%"},"Case-based populations"),r.createElement(Q.Z,{width:"35%"},"Aggregated populations"))),r.createElement(z.Z,null,l.map(((e,n)=>{return r.createElement(Yt,{key:n,combination:e,appMgr:t,isSelected:(l=e.id,-1!==a.indexOf(l)),onSelectClick:i(e.id)});var l})))),r.createElement(Ze,{selectedCount:o,onAddClick:()=>{t.popCombMgr.addEmptyCombination()},onDeleteClick:()=>{t.popCombMgr.removeCombinations(a),n([])}}))})),kt=(0,d.Z)((()=>({valueLabel:{top:-15,"& *":{background:"transparent",fontSize:11}}}))),Bt=(0,l.Pi)((e=>{const t=kt(),{i:a,rowCount:n,dataFile:l,appMgr:i}=e,s=(e,t)=>{i.aggrDataMgr.setDataFileYears(l.name,t)};let o=null;return(1===n||n>1&&0===a)&&(o=r.createElement(Q.Z,{rowSpan:n},r.createElement(_e.Z,{min:i.aggrDataMgr.rangeYears[0],max:i.aggrDataMgr.rangeYears[1],value:l.years,onChange:s,classes:{valueLabel:t.valueLabel},valueLabelDisplay:"on",valueLabelFormat:e=>e.toFixed(),"aria-labelledby":"range-slider",getAriaLabel:e=>e.toFixed(),getAriaValueText:e=>e.toFixed(),color:"secondary"}))),r.createElement(J.Z,null,r.createElement(Q.Z,null,l.name),r.createElement(Q.Z,null,r.createElement(Te.Z,{color:"primary",checked:l.use,onChange:e=>{i.aggrDataMgr.setDataFileUse(l.name,e.target.checked)},size:"small"})),o)})),Ut=(0,l.Pi)((e=>{const{appMgr:t}=e;return r.createElement(q.Z,null,r.createElement(G.Z,null,r.createElement(ue.Z,null,r.createElement(J.Z,null,r.createElement(Q.Z,{width:"20%"},"Data type"),r.createElement(Q.Z,{width:"20%"},"Use"),r.createElement(Q.Z,{width:"60%"},"Years"))),r.createElement(z.Z,null,t.aggrDataMgr.dataFiles.map(((e,a)=>r.createElement(Bt,{key:a,i:a,rowCount:1,dataFile:e,appMgr:t}))))))})),Vt=e=>{const{appMgr:t}=e;return r.createElement(V,null,r.createElement(_.Z,{container:!0,spacing:2},r.createElement(_.Z,{item:!0,xs:12},r.createElement(h.Z,{display:"flex",justifyContent:"flex-end"},r.createElement(R.Z,{size:"small",color:"primary",onClick:e=>t.uiStateMgr.setActivePageId(4,1)},"Next step"))),r.createElement(_.Z,{item:!0,xs:12},r.createElement(p.Z,{variant:"h6"},"Case-based data")),r.createElement(_.Z,{item:!0,xs:2},r.createElement(p.Z,null,"Create populations from data"),r.createElement(p.Z,{variant:"body2",color:"textSecondary"},"Stratify data by values present in the data. Select one or more variables.")),r.createElement(_.Z,{item:!0,xs:10},r.createElement(_t,e)),r.createElement(_.Z,{item:!0,xs:12},r.createElement(B.Z,{light:!0,style:{margin:"30px 0"}})),r.createElement(_.Z,{item:!0,xs:12},r.createElement(p.Z,{variant:"h6"},"Aggregated data")),r.createElement(_.Z,{item:!0,xs:2},r.createElement(p.Z,null,"Select data for modelling"),r.createElement(p.Z,{variant:"body2",color:"textSecondary"},"Only years present in the aggregated data set will overwrite case-based derived data.")),r.createElement(_.Z,{item:!0,xs:10},r.createElement(Ut,e)),r.createElement(_.Z,{item:!0,xs:12},r.createElement(B.Z,{light:!0,style:{margin:"30px 0"}})),r.createElement(_.Z,{item:!0,xs:12},r.createElement(p.Z,{variant:"h6"},"Combine populations")),r.createElement(_.Z,{item:!0,xs:2},r.createElement(p.Z,{variant:"body2",color:"textSecondary"},"Combine case-based and aggregated data populations.")),r.createElement(_.Z,{item:!0,xs:10},r.createElement(jt,e))))},Ht=(0,l.Pi)((e=>{const{i:t,isSelected:a,onSelectClick:n,interval:l,collection:i}=e,s=e=>i.setIntervalStartYear(t,e.target.value);let o=null;return o=0===t?l.startYear:r.createElement(De.Z,{style:{width:"100%",fontSize:"0.75rem"},value:l.startYear,type:"number",onChange:s}),r.createElement(J.Z,{hover:!0,role:"checkbox"},r.createElement(Q.Z,{padding:"checkbox"},r.createElement(pe.Z,{inputProps:{"aria-labelledby":`labelId${t}`},color:"primary",checked:a,onClick:n})),r.createElement(Q.Z,{id:"labelId1",scope:"row",padding:"none"},o),r.createElement(Q.Z,null,l.endYear),r.createElement(Q.Z,{padding:"checkbox"},r.createElement(pe.Z,{color:"primary",checked:l.jump,onChange:e=>i.setIntervalJump(t,e.target.checked)})),r.createElement(Q.Z,{padding:"checkbox"},r.createElement(pe.Z,{color:"primary",checked:l.diffByCD4,onChange:e=>i.setIntervalDiffByCD4(t,e.target.checked)})),r.createElement(Q.Z,{padding:"checkbox"},r.createElement(pe.Z,{color:"primary",checked:l.changeInInterval,onChange:e=>i.setIntervalChangeInInterval(t,e.target.checked)})))})),Gt=(0,l.Pi)((e=>{const{timeIntCollMgr:t}=e,[a,n]=r.useState([]),l=t.selectedEditCollection,i=l.intervals,s=e=>t=>{const r=a.indexOf(e);let l=[];-1===r?l=l.concat(a,e):0===r?l=l.concat(a.slice(1)):r===a.length-1?l=l.concat(a.slice(0,-1)):r>0&&(l=l.concat(a.slice(0,r),a.slice(r+1))),n(l)},o=i.length,m=a.length,c=e=>-1!==a.indexOf(e);return r.createElement(q.Z,{style:{padding:10}},r.createElement(p.Z,{variant:"overline"},"Collection: ",l.name),r.createElement(G.Z,null,r.createElement(ue.Z,null,r.createElement(J.Z,null,r.createElement(Q.Z,{padding:"checkbox"},r.createElement(pe.Z,{inputProps:{"aria-label":"select all"},color:"primary",onClick:e=>{if(e.target.checked){const e=i.map(((e,t)=>t));n(e)}else n([])},checked:o>0&&m===o}),"            "),r.createElement(Q.Z,{width:"15%",padding:"none"},"Start year"),r.createElement(Q.Z,{width:"15%"},"End year"),r.createElement(Q.Z,null,"Jump"),r.createElement(Q.Z,null,"Change by CD4 count"),r.createElement(Q.Z,null,"Change in interval"))),r.createElement(z.Z,null,i.map(((e,t)=>r.createElement(Ht,{key:t,i:t,interval:e,collection:l,isSelected:c(t),onSelectClick:s(t)}))))),r.createElement(Ze,{selectedCount:m,onAddClick:()=>{l.addEmptyInterval()},onDeleteClick:()=>{l.removeIntervals(a),n([])}}))})),Wt=(0,l.Pi)((e=>{const{timeIntCollMgr:t}=e,a=t.defaultEditCollectionSelected;return r.createElement(r.Fragment,null,r.createElement(ge.Z,{value:t.selectedEditCollectionId,onChange:e=>t.setSelectedEditCollectionId(e.target.value),style:{width:"100%",fontSize:"0.75rem"}},t.collectionsArray.map(((e,t)=>r.createElement(he.Z,{key:t,value:e.id,dense:!0},e.name)))),r.createElement(R.Z,{color:"primary",onClick:()=>t.deleteSelectedEditCollection(),disabled:a},"Delete"),r.createElement(R.Z,{color:"primary",onClick:()=>t.addNewCollection()},"Add"))})),zt=(0,l.Pi)((e=>{const{appMgr:t}=e;return r.createElement(V,null,r.createElement(_.Z,{container:!0,spacing:2},r.createElement(_.Z,{item:!0,xs:12},r.createElement(h.Z,{display:"flex",justifyContent:"flex-end"},r.createElement(R.Z,{size:"small",color:"primary",onClick:()=>t.uiStateMgr.setActivePageId(4,2)},"Next step"))),r.createElement(_.Z,{item:!0,xs:12},r.createElement(p.Z,{variant:"h6"},"Upload model parameters file")),r.createElement(_.Z,{item:!0,xs:2},r.createElement("input",{style:{display:"none"},id:"modelUploadBtn",type:"file",onChange:e=>{const a=e.target.files[0];t.modelMgr.setModelsParamFile(a),e.target.value=null}}),r.createElement("label",{htmlFor:"modelUploadBtn"},r.createElement(te,null,r.createElement(K.Z,null)," Upload model")),r.createElement(p.Z,{variant:"body2",color:"textSecondary",style:{marginTop:10}},"Parameters loaded from model file override those determined from data.",r.createElement("br",null),"Supported files types: xml (uncompressed and zip archives)")),r.createElement(_.Z,{item:!0,xs:10},r.createElement(q.Z,{style:{padding:10}},r.createElement(p.Z,{variant:"overline"},"Uploaded file details"),r.createElement(_.Z,{container:!0,spacing:2},r.createElement(_.Z,{item:!0,xs:12},r.createElement(G.Z,null,r.createElement(z.Z,null,r.createElement(J.Z,{hover:!0},r.createElement(Q.Z,{width:100},"File name"),r.createElement(Q.Z,null,t.modelMgr.modelsParamFileName)))))))),r.createElement(_.Z,{item:!0,xs:12},r.createElement(B.Z,{light:!0,style:{margin:"30px 0"}})),r.createElement(_.Z,{item:!0,xs:12},r.createElement(p.Z,{variant:"h6"},"Time intervals and diagnosis rates modelling")),r.createElement(_.Z,{item:!0,xs:2},r.createElement(Wt,{timeIntCollMgr:t.modelMgr.timeIntCollMgr})),r.createElement(_.Z,{item:!0,xs:10},r.createElement(Gt,{timeIntCollMgr:t.modelMgr.timeIntCollMgr}))))})),Qt=(0,d.Z)((()=>({valueLabel:{top:-15,"& *":{background:"transparent",fontSize:11}}}))),Jt=e=>{const{minYear:t,maxYear:a,value:n,onChange:l}=e,i=Qt();return r.createElement(_e.Z,{min:t,max:a,value:n,onChange:l,classes:{valueLabel:i.valueLabel},valueLabelDisplay:"on",valueLabelFormat:e=>e.toFixed(),"aria-labelledby":"range-slider",getAriaLabel:e=>e.toFixed(),getAriaValueText:e=>e.toFixed(),color:"secondary"})},$t=(0,l.Pi)((e=>{const{appMgr:t}=e,a=t.modelMgr.optimalYears.All[0]-1,n=t.modelMgr.optimalYears.All[1];return r.createElement(q.Z,null,r.createElement(G.Z,null,r.createElement(ue.Z,null,r.createElement(J.Z,null,r.createElement(Q.Z,{width:"50px"},"Idx"),r.createElement(Q.Z,{width:"330px"},"Parameter"),r.createElement(Q.Z,null,"Value"))),r.createElement(z.Z,null,r.createElement(J.Z,null,r.createElement(Q.Z,null,"1."),r.createElement(Q.Z,null,"Range of calculations"),r.createElement(Q.Z,null,r.createElement(Jt,{minYear:a,maxYear:n,value:[t.modelMgr.minYear,t.modelMgr.maxYear],onChange:(e,a)=>{t.modelMgr.setMinYear(a[0]),t.modelMgr.setMaxYear(a[1])}}))),r.createElement(J.Z,null,r.createElement(Q.Z,null,"2."),r.createElement(Q.Z,null,"HIV diagnoses, total"),r.createElement(Q.Z,null,r.createElement(Jt,{minYear:a,maxYear:n,value:[t.modelMgr.minFitPos,t.modelMgr.maxFitPos],onChange:(e,a)=>{t.modelMgr.setMinFitPos(a[0]),t.modelMgr.setMaxFitPos(a[1])}}))),r.createElement(J.Z,null,r.createElement(Q.Z,null,"3."),r.createElement(Q.Z,null,"HIV diagnoses, by CD4 count"),r.createElement(Q.Z,null,r.createElement(Jt,{minYear:a,maxYear:n,value:[t.modelMgr.minFitCD4,t.modelMgr.maxFitCD4],onChange:(e,a)=>{t.modelMgr.setMinFitCD4(a[0]),t.modelMgr.setMaxFitCD4(a[1])}}))),r.createElement(J.Z,null,r.createElement(Q.Z,null,"4."),r.createElement(Q.Z,null,"AIDS diagnoses, total"),r.createElement(Q.Z,null,r.createElement(Jt,{minYear:a,maxYear:n,value:[t.modelMgr.minFitAIDS,t.modelMgr.maxFitAIDS],onChange:(e,a)=>{t.modelMgr.setMinFitAIDS(a[0]),t.modelMgr.setMaxFitAIDS(a[1])}}))),r.createElement(J.Z,null,r.createElement(Q.Z,null,"5."),r.createElement(Q.Z,null,"HIV/AIDS diagnoses, total"),r.createElement(Q.Z,null,r.createElement(Jt,{minYear:a,maxYear:n,value:[t.modelMgr.minFitHIVAIDS,t.modelMgr.maxFitHIVAIDS],onChange:(e,a)=>{t.modelMgr.setMinFitHIVAIDS(a[0]),t.modelMgr.setMaxFitHIVAIDS(a[1])}}))),r.createElement(J.Z,null,r.createElement(Q.Z,null,"6."),r.createElement(Q.Z,null,"Do you have data from the start of the epidemic?"),r.createElement(Q.Z,null,r.createElement(Ke.Z,{row:!0,value:t.modelMgr.fullData,onChange:e=>t.modelMgr.setFullData("true"===e.target.value)},r.createElement(Fe.Z,{value:!0,control:r.createElement(qe.Z,{color:"primary"}),label:"Yes"}),r.createElement(Fe.Z,{value:!1,control:r.createElement(qe.Z,{color:"primary"}),label:"No"})))),r.createElement(J.Z,null,r.createElement(Q.Z,null,"7."),r.createElement(Q.Z,null,"Knots count"),r.createElement(Q.Z,null,r.createElement(De.Z,{style:{width:"120px",fontSize:"0.75rem"},value:t.modelMgr.knotsCount,onChange:e=>t.modelMgr.setKnotsCount(e.target.value),type:"number",inputProps:{min:2,max:10}}))),r.createElement(J.Z,null,r.createElement(Q.Z,null,"8."),r.createElement(Q.Z,null,"Start at zero"),r.createElement(Q.Z,null,r.createElement(Ke.Z,{row:!0,value:t.modelMgr.startIncZero,onChange:e=>t.modelMgr.setStartIncZero("true"===e.target.value)},r.createElement(Fe.Z,{value:!0,control:r.createElement(qe.Z,{color:"primary"}),label:"Yes"}),r.createElement(Fe.Z,{value:!1,control:r.createElement(qe.Z,{color:"primary"}),label:"No"})))),r.createElement(J.Z,null,r.createElement(Q.Z,null,"9."),r.createElement(Q.Z,null,"Prevent sudden changes at end of observation interval"),r.createElement(Q.Z,null,r.createElement(Ke.Z,{row:!0,value:t.modelMgr.maxIncCorr,onChange:e=>t.modelMgr.setMaxIncCorr("true"===e.target.value)},r.createElement(Fe.Z,{value:!0,control:r.createElement(qe.Z,{color:"primary"}),label:"Yes"}),r.createElement(Fe.Z,{value:!1,control:r.createElement(qe.Z,{color:"primary"}),label:"No"})))),r.createElement(J.Z,null,r.createElement(Q.Z,null,"10."),r.createElement(Q.Z,null,"Maximum likelihood distribution"),r.createElement(Q.Z,null,r.createElement(Ke.Z,{row:!0,value:t.modelMgr.distributionFit,onChange:e=>t.modelMgr.setDistributionFit(e.target.value)},r.createElement(Fe.Z,{value:"POISSON",control:r.createElement(qe.Z,{color:"primary"}),label:"Poisson"}),r.createElement(Fe.Z,{value:"NEGATIVE_BINOMIAL",control:r.createElement(qe.Z,{color:"primary"}),label:"Negative Binomial"})))),r.createElement(J.Z,null,r.createElement(Q.Z,null,"11."),r.createElement(Q.Z,null,"Extra diagnosis rate due to non-AIDS symptoms"),r.createElement(Q.Z,null,r.createElement(De.Z,{style:{width:"120px",fontSize:"0.75rem"},value:t.modelMgr.delta4Fac,onChange:e=>t.modelMgr.setDelta4Fac(e.target.value),type:"number"}))),r.createElement(J.Z,null,r.createElement(Q.Z,null,"12."),r.createElement(Q.Z,null,"Country-specific settings"),r.createElement(Q.Z,null,r.createElement(ge.Z,{value:t.modelMgr.country,onChange:e=>t.modelMgr.setCountry(e.target.value),style:{width:"120px",fontSize:"0.75rem"}},r.createElement(he.Z,{value:"OTHER",dense:!0},"Other"),r.createElement(he.Z,{value:"NL",dense:!0},"NL")))))))})),qt=e=>{const{appMgr:t}=e;return r.createElement(V,null,r.createElement(_.Z,{container:!0,spacing:2},r.createElement(_.Z,{item:!0,xs:12},r.createElement(h.Z,{display:"flex",justifyContent:"flex-end"},r.createElement(R.Z,{size:"small",color:"primary",onClick:e=>t.uiStateMgr.setActivePageId(4,3)},"Next step"))),r.createElement(_.Z,{item:!0,xs:12},r.createElement(p.Z,{variant:"h6"},"Advanced paramaters")),r.createElement(_.Z,{item:!0,xs:2}),r.createElement(_.Z,{item:!0,xs:10},r.createElement($t,e))))},Kt=(0,d.Z)((()=>({root:{marginTop:10,marginBottom:10,height:10}}))),Xt=e=>{const{progress:t}=e;if(C(t))return null;const a=Kt();return r.createElement(ae.Z,{color:"secondary",className:a.root})},ea=(0,l.Pi)((e=>{const{appMgr:t}=e;return r.createElement(V,null,r.createElement(_.Z,{container:!0,spacing:2},r.createElement(_.Z,{item:!0,xs:12},r.createElement(h.Z,{display:"flex",justifyContent:"flex-end"},r.createElement(R.Z,{size:"small",color:"primary",disabled:!t.uiStateMgr.bootstrapEnabled,onClick:e=>t.uiStateMgr.setActivePageId(4,4)},"Next step"))),r.createElement(_.Z,{item:!0,xs:12},r.createElement(p.Z,{variant:"h6"},"Perform main fit of HIV model")),r.createElement(_.Z,{item:!0,xs:2},r.createElement(Ee.Z,{style:{width:"100%",marginTop:20}},r.createElement(ge.Z,{value:t.popCombMgr.selectedCombination.id,onChange:e=>{t.popCombMgr.setSelectedCombination(e.target.value)},style:{width:"100%",fontSize:"0.75rem"}},t.popCombMgr.combinationsArray.map((e=>r.createElement(he.Z,{key:e.id,value:e.id,dense:!0},e.name)))),r.createElement(Me.Z,null,"Select population")),r.createElement(Ee.Z,{style:{width:"100%",marginTop:20,marginBottom:20}},r.createElement(ge.Z,{value:t.modelMgr.timeIntCollMgr.selectedRunCollectionId,onChange:e=>{t.modelMgr.timeIntCollMgr.setSelectedRunCollectionId(e.target.value)},style:{width:"100%",fontSize:"0.75rem"}},t.modelMgr.timeIntCollMgr.collectionsArray.map(((e,t)=>r.createElement(he.Z,{key:t,value:e.id,dense:!0},e.name)))),r.createElement(Me.Z,null,"Select time intervals and diagnosis rates modelling matrix")),r.createElement(te,{onClick:()=>{t.modelMgr.runModels()},disabled:t.modelMgr.modelsRunInProgress}," Run main model"),r.createElement(R.Z,{onClick:()=>{t.modelMgr.cancelModels()},color:"primary",style:{marginLeft:20},disabled:!t.modelMgr.modelsRunInProgress},"Cancel"),r.createElement(Xt,{progress:t.modelMgr.modelsRunProgress})),r.createElement(_.Z,{item:!0,xs:10},r.createElement(q.Z,{style:{padding:10}},r.createElement(p.Z,{variant:"overline"},"Run log"),r.createElement("pre",{dangerouslySetInnerHTML:{__html:t.modelMgr.modelsRunLog},style:{overflowX:"auto",fontSize:"0.75rem"}})))))})),ta=(0,d.Z)({btRoot:{marginTop:20,marginBottom:20,width:"100%"},btOption:{"& span":{fontSize:"0.75rem"}}}),aa=(0,d.Z)((()=>({root:{marginTop:10,marginBottom:10,height:10}}))),ra=e=>{const{progress:t}=e;if(C(t))return null;const a=aa();return r.createElement(ae.Z,{color:"secondary",className:a.root})},na=(0,l.Pi)((e=>{const{appMgr:t}=e,a=ta();return r.createElement(V,null,r.createElement(_.Z,{container:!0,spacing:2},r.createElement(_.Z,{item:!0,xs:12},r.createElement(h.Z,{display:"flex",justifyContent:"flex-end"},r.createElement(R.Z,{size:"small",color:"primary",disabled:!t.uiStateMgr.modellingOutputsEnabled,onClick:e=>t.uiStateMgr.setActivePageId(4,5)},"Next step"))),r.createElement(_.Z,{item:!0,xs:12},r.createElement(p.Z,{variant:"h6"},"Perform bootstrap fit of HIV model")),r.createElement(_.Z,{item:!0,xs:2},r.createElement(Ee.Z,{style:{width:"100%",marginTop:20}},r.createElement(De.Z,{style:{width:"100%",fontSize:"0.75rem"},value:t.modelMgr.bootstrapCount,onChange:e=>t.modelMgr.setBootstrapCount(e.target.value),type:"number"}),r.createElement(Me.Z,null,"Set the number of iterations")),r.createElement(Ee.Z,{className:a.btRoot},r.createElement(Ke.Z,{row:!0,value:t.modelMgr.bootstrapType,onChange:e=>t.modelMgr.setBootstrapType(e.target.value)},r.createElement(Fe.Z,{value:"PARAMETRIC",control:r.createElement(qe.Z,{color:"primary"}),label:"Parametric",className:a.btOption}),r.createElement(Fe.Z,{value:"NON-PARAMETRIC",control:r.createElement(qe.Z,{color:"primary"}),label:"Non-parametric",disabled:!t.uiStateMgr.nonParametricBootstrapEnabled,className:a.btOption})),r.createElement(Me.Z,null,"Set the bootstrap type")),r.createElement(te,{onClick:()=>t.modelMgr.runBootstrap(),disabled:t.modelMgr.bootstrapRunInProgress},"Run bootstrap"),r.createElement(R.Z,{onClick:()=>t.modelMgr.cancelBootstrap(),color:"primary",style:{marginLeft:20},disabled:!t.modelMgr.bootstrapRunInProgress},"Cancel"),r.createElement(ra,{progress:t.modelMgr.bootstrapRunProgress})),r.createElement(_.Z,{item:!0,xs:10},r.createElement(q.Z,{style:{padding:10}},r.createElement(p.Z,{variant:"overline"},"Run log"),r.createElement("pre",{dangerouslySetInnerHTML:{__html:t.modelMgr.bootstrapRunLog},style:{overflowX:"auto",fontSize:"0.75rem"}})))))}));Oe.D([je.N,ke.N,Be.N,it.N,Ue.N,lt.N,Ve.N]);const la=(0,l.Pi)((e=>{const{title:t,year:a,data:n,model:l,min:i,range:s}=e;let o=[],m=[];C(i)||m.push({name:"Min",data:i,type:"line",stack:"confidence-bounds",symbol:"none",silent:!0,color:"#69b023",lineStyle:{width:0},emphasis:{areaStyle:{color:"#69b023"},lineStyle:{width:0}}}),C(s)||m.push({name:"Confidence bounds",data:s,type:"line",silent:!0,areaStyle:{color:"#69b023",opacity:.15},emphasis:{areaStyle:{color:"#69b023"},lineStyle:{width:0}},color:"#69b023",lineStyle:{width:0},stack:"confidence-bounds",symbol:"none",smooth:!1}),C(l)||m.push({name:"Model",type:"line",smooth:!1,color:"#69b023",data:l,emphasis:{scale:!1,focus:"none",lineStyle:{width:2,color:"#69b023"}}}),C(n)||(m.push({name:"Data",type:"line",data:n,lineStyle:{type:"dashed"},emphasis:{scale:!1,focus:"none",lineStyle:{width:2,color:"#000"}},smooth:!1,color:"#777"}),o.push({name:"Data"})),C(l)||o.push({name:"Model"}),C(s)||o.push({name:"Confidence bounds"});const c={textStyle:{fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif'},grid:{top:40,right:20,bottom:40,left:80},title:{text:t},xAxis:{type:"category",nameLocation:"center",data:a,name:"Year",nameTextStyle:{padding:[10,0,0,0]},axisTick:{alignWithLabel:!0},boundaryGap:!1},yAxis:{type:"value",name:"Count",nameLocation:"center",nameGap:65},series:m,tooltip:{trigger:"axis"},toolbox:{show:!0,feature:{dataZoom:{yAxisIndex:"none"},saveAsImage:{pixelRatio:2,title:"Save"}}},legend:{data:o}};return r.createElement(we.Z,{echarts:Ye,option:c,style:{height:"300px",width:"100%"},notMerge:!0,lazyUpdate:!0,opts:{}})}));var ia=a(556);const sa=(0,d.Z)((()=>({table:{"& > .MuiTableHead-root":{"& > .MuiTableRow-root":{"& > .MuiTableCell-root":{padding:5,fontSize:"0.6rem",backgroundColor:"white",textAlign:"right"}}},"& > .MuiTableBody-root":{"& > .MuiTableRow-root":{"& > .MuiTableCell-root":{padding:5,fontSize:"0.6rem",backgroundColor:"transparent",textAlign:"right"}}}}}))),oa=(0,l.Pi)((e=>{const{tableData:t,maxHeight:a}=e,n=sa();return r.createElement(ia.Z,{style:{maxHeight:a||300}},r.createElement(G.Z,{size:"small",stickyHeader:!0,className:n.table},r.createElement(ue.Z,null,r.createElement(J.Z,null,t.ColNames.map(((e,t)=>r.createElement(Q.Z,{key:t},e))))),r.createElement(z.Z,null,t.Data[0].map(((e,a)=>r.createElement(J.Z,{hover:!0,key:a},t.ColNames.map(((e,n)=>r.createElement(Q.Z,{key:n},t.Data[n][a])))))))))})),ma=(0,l.Pi)((e=>{const{appMgr:t}=e;return C(t.modelMgr.plotData)?null:r.createElement(_.Z,{container:!0,spacing:2,style:{marginTop:20}},r.createElement(_.Z,{item:!0,xs:12},r.createElement(p.Z,{variant:"h6"},"A. HIV diagnoses, total")),r.createElement(_.Z,{item:!0,xs:5},r.createElement(oa,{tableData:t.modelMgr.gofTable1Data})),r.createElement(_.Z,{item:!0,xs:7},r.createElement(la,{year:t.modelMgr.plotData.Year,data:t.modelMgr.plotData.N_HIV_D,model:t.modelMgr.plotData.N_HIV_Obs_M,min:t.modelMgr.plotData.N_HIV_Obs_M_LB,range:t.modelMgr.plotData.N_HIV_Obs_M_Range})),r.createElement(_.Z,{item:!0,xs:12},r.createElement(p.Z,{variant:"h6"},"B. HIV diagnoses, CD4 ","≥"," 500")),r.createElement(_.Z,{item:!0,xs:5},r.createElement(oa,{tableData:t.modelMgr.gofTable2Data})),r.createElement(_.Z,{item:!0,xs:7},r.createElement(la,{year:t.modelMgr.plotData.Year,data:t.modelMgr.plotData.N_CD4_1_D,model:t.modelMgr.plotData.N_CD4_1_Obs_M,min:t.modelMgr.plotData.N_CD4_1_Obs_M_LB,range:t.modelMgr.plotData.N_CD4_1_Obs_M_Range})),r.createElement(_.Z,{item:!0,xs:12},r.createElement(p.Z,{variant:"h6"},"C. HIV diagnoses, CD4 350 - 499")),r.createElement(_.Z,{item:!0,xs:5},r.createElement(oa,{tableData:t.modelMgr.gofTable3Data})),r.createElement(_.Z,{item:!0,xs:7},r.createElement(la,{year:t.modelMgr.plotData.Year,data:t.modelMgr.plotData.N_CD4_2_D,model:t.modelMgr.plotData.N_CD4_2_Obs_M,min:t.modelMgr.plotData.N_CD4_2_Obs_M_LB,range:t.modelMgr.plotData.N_CD4_2_Obs_M_Range})),r.createElement(_.Z,{item:!0,xs:12},r.createElement(p.Z,{variant:"h6"},"D. HIV diagnoses, CD4 200 - 349")),r.createElement(_.Z,{item:!0,xs:5},r.createElement(oa,{tableData:t.modelMgr.gofTable4Data})),r.createElement(_.Z,{item:!0,xs:7},r.createElement(la,{year:t.modelMgr.plotData.Year,data:t.modelMgr.plotData.N_CD4_3_D,model:t.modelMgr.plotData.N_CD4_3_Obs_M,min:t.modelMgr.plotData.N_CD4_3_Obs_M_LB,range:t.modelMgr.plotData.N_CD4_3_Obs_M_Range})),r.createElement(_.Z,{item:!0,xs:12},r.createElement(p.Z,{variant:"h6"},"E. HIV diagnoses, CD4 ","<"," 200")),r.createElement(_.Z,{item:!0,xs:5},r.createElement(oa,{tableData:t.modelMgr.gofTable5Data})),r.createElement(_.Z,{item:!0,xs:7},r.createElement(la,{year:t.modelMgr.plotData.Year,data:t.modelMgr.plotData.N_CD4_4_D,model:t.modelMgr.plotData.N_CD4_4_Obs_M,min:t.modelMgr.plotData.N_CD4_4_Obs_M_LB,range:t.modelMgr.plotData.N_CD4_4_Obs_M_Range})),r.createElement(_.Z,{item:!0,xs:12},r.createElement(p.Z,{variant:"h6"},"F. HIV/AIDS diagnoses")),r.createElement(_.Z,{item:!0,xs:5},r.createElement(oa,{tableData:t.modelMgr.gofTable6Data})),r.createElement(_.Z,{item:!0,xs:7},r.createElement(la,{year:t.modelMgr.plotData.Year,data:t.modelMgr.plotData.N_HIVAIDS_D,model:t.modelMgr.plotData.N_HIVAIDS_Obs_M,min:t.modelMgr.plotData.N_HIVAIDS_Obs_M_LB,range:t.modelMgr.plotData.N_HIVAIDS_Obs_M_Range})),r.createElement(_.Z,{item:!0,xs:12},r.createElement(p.Z,{variant:"h6"},"G. AIDS diagnoses, total")),r.createElement(_.Z,{item:!0,xs:5},r.createElement(oa,{tableData:t.modelMgr.gofTable7Data})),r.createElement(_.Z,{item:!0,xs:7},r.createElement(la,{year:t.modelMgr.plotData.Year,data:t.modelMgr.plotData.N_AIDS_D,model:t.modelMgr.plotData.N_AIDS_M,min:t.modelMgr.plotData.N_AIDS_M_LB,range:t.modelMgr.plotData.N_AIDS_M_Range})))})),ca=(0,l.Pi)((e=>{const{appMgr:t}=e;return C(t.modelMgr.plotData)?null:r.createElement(_.Z,{container:!0,spacing:2,style:{marginTop:20}},r.createElement(_.Z,{item:!0,xs:12},r.createElement(p.Z,{variant:"h6"},"A. Main results")),r.createElement(_.Z,{item:!0,xs:12},r.createElement(oa,{tableData:t.modelMgr.mainOutputTableData,maxHeight:"100%"})))})),da=(0,l.Pi)((e=>{const{appMgr:t}=e;return C(t.modelMgr.plotData)?null:r.createElement(_.Z,{container:!0,spacing:2,style:{marginTop:20}},r.createElement(_.Z,{item:!0,xs:12},r.createElement(p.Z,{variant:"h6"},"A. HIV infections per year")),r.createElement(_.Z,{item:!0,xs:5},r.createElement(oa,{tableData:t.modelMgr.outputTable1Data})),r.createElement(_.Z,{item:!0,xs:7},r.createElement(la,{year:t.modelMgr.plotData.Year,model:t.modelMgr.plotData.N_Inf_M,min:t.modelMgr.plotData.N_Inf_M_LB,range:t.modelMgr.plotData.N_Inf_M_Range})),r.createElement(_.Z,{item:!0,xs:12},r.createElement(p.Z,{variant:"h6"},"B. Time to diagnosis")),r.createElement(_.Z,{item:!0,xs:5},r.createElement(oa,{tableData:t.modelMgr.outputTable2Data})),r.createElement(_.Z,{item:!0,xs:7},r.createElement(la,{year:t.modelMgr.plotData.Year,model:t.modelMgr.plotData.t_diag,min:t.modelMgr.plotData.t_diag_LB,range:t.modelMgr.plotData.t_diag_Range})),r.createElement(_.Z,{item:!0,xs:12},r.createElement(p.Z,{variant:"h6"},"C. Total number of HIV-infected")),r.createElement(_.Z,{item:!0,xs:5},r.createElement(oa,{tableData:t.modelMgr.outputTable3Data})),r.createElement(_.Z,{item:!0,xs:7},r.createElement(la,{year:t.modelMgr.plotData.Year,model:t.modelMgr.plotData.N_Alive,min:t.modelMgr.plotData.N_Alive_LB,range:t.modelMgr.plotData.N_Alive_Range})),r.createElement(_.Z,{item:!0,xs:12},r.createElement(p.Z,{variant:"h6"},"D. Proportion undiagnosed of all those alive")),r.createElement(_.Z,{item:!0,xs:5},r.createElement(oa,{tableData:t.modelMgr.outputTable4Data})),r.createElement(_.Z,{item:!0,xs:7},r.createElement(la,{year:t.modelMgr.plotData.Year,model:t.modelMgr.plotData.N_Und_Alive_p,min:t.modelMgr.plotData.N_Und_Alive_p_LB,range:t.modelMgr.plotData.N_Und_Alive_p_Range})))})),ua=(0,l.Pi)((e=>{const{appMgr:t}=e,[a,n]=r.useState(0);return r.createElement(V,null,r.createElement(_.Z,{container:!0,spacing:2},r.createElement(_.Z,{item:!0,xs:12},r.createElement(h.Z,{display:"flex",justifyContent:"flex-end"},r.createElement(R.Z,{size:"small",color:"primary",onClick:()=>t.uiStateMgr.setActivePageId(5)},"Next step"))),r.createElement(_.Z,{item:!0,xs:12},r.createElement(p.Z,{variant:"h6"},"HIV Modelling results")),r.createElement(_.Z,{item:!0,xs:2}),r.createElement(_.Z,{item:!0,xs:10},r.createElement(q.Z,{style:{padding:10}},r.createElement(Ct.Z,{value:a,onChange:(e,t)=>n(t),indicatorColor:"primary",textColor:"primary"},r.createElement(vt.Z,{label:"Goodness of fit"}),r.createElement(vt.Z,{label:"Tables"}),r.createElement(vt.Z,{label:"Graphs"})),0===a&&r.createElement(ma,{appMgr:t}),1===a&&r.createElement(ca,{appMgr:t}),2===a&&r.createElement(da,{appMgr:t})))))})),ga=(0,l.Pi)((e=>{const{appMgr:t}=e,a=t.uiStateMgr.activeSubPageId;return r.createElement(r.Fragment,null,0===a&&r.createElement(Vt,e),1===a&&r.createElement(zt,e),2===a&&r.createElement(qt,e),3===a&&r.createElement(ea,e),4===a&&r.createElement(na,e),5===a&&r.createElement(ua,e))})),pa=(0,d.Z)((()=>({root:{marginTop:10,marginBottom:10,height:10}}))),ha=e=>{const{progress:t}=e;if(!t)return null;const a=pa();return r.createElement(ae.Z,{color:"secondary",className:a.root})},Ea=(0,l.Pi)((e=>{const{appMgr:t}=e,a=["reportHTML","reportPDF","reportLATEX","reportWORD"];r.useEffect((()=>(t.unbindShiny(a),t.bindShiny(),()=>t.unbindShiny(a))));return r.createElement(V,null,r.createElement(_.Z,{container:!0,spacing:2},r.createElement(_.Z,{item:!0,xs:12},r.createElement(h.Z,{display:"flex",justifyContent:"flex-end"},r.createElement(R.Z,{size:"small",color:"primary",disabled:!t.uiStateMgr.outputsPageEnabled,onClick:e=>t.uiStateMgr.setActivePageId(6)},"Next step"))),r.createElement(_.Z,{item:!0,xs:12},r.createElement(p.Z,{variant:"h6"},"Select report")),r.createElement(_.Z,{item:!0,xs:2},r.createElement(Ee.Z,{style:{width:"100%",marginTop:20,marginBottom:20}},r.createElement(ge.Z,{value:1,style:{width:"100%",fontSize:"0.75rem"}},r.createElement(he.Z,{value:1,dense:!0},"Report on adjusted data")),r.createElement(Me.Z,null,"Select report type")),r.createElement(te,{onClick:e=>t.reportMgr.createReport(),disabled:t.reportMgr.creatingReportInProgress},"Create report"),r.createElement(R.Z,{onClick:()=>t.reportMgr.cancelCreatingReport(),color:"primary",style:{marginLeft:20},disabled:!t.reportMgr.creatingReportInProgress},"Cancel"),r.createElement(ha,{progress:t.reportMgr.creatingReportInProgress})),r.createElement(_.Z,{item:!0,xs:10},r.createElement(q.Z,{style:{padding:10}},r.createElement(p.Z,{variant:"overline"},"Report on adjusted data parameters"),r.createElement(pt.Z,null,r.createElement(Fe.Z,{control:r.createElement(pe.Z,{checked:t.reportMgr.adjustReportParams.reportingDelay,onChange:(e,a)=>t.reportMgr.setAdjustReportReportingDelay(a),color:"primary"}),label:"Adjust count of cases for reporting delay"}),r.createElement(Fe.Z,{control:r.createElement(pe.Z,{checked:t.reportMgr.adjustReportParams.smoothing,onChange:(e,a)=>t.reportMgr.setAdjustReportSmoothing(a),color:"primary"}),label:"Apply plot curves smoothing"}),r.createElement(Fe.Z,{control:r.createElement(pe.Z,{checked:t.reportMgr.adjustReportParams.cd4ConfInt,onChange:(e,a)=>t.reportMgr.setAdjustReportCD4ConfInt(a),color:"primary"}),label:"Plot inter-quartile range in CD4 count plots"})),r.createElement(R.Z,{color:"primary",onClick:e=>t.reportMgr.restoreDefaults()},"Restore defaults"))),t.reportMgr.report&&r.createElement(r.Fragment,null,r.createElement(_.Z,{item:!0,xs:12},r.createElement(B.Z,{light:!0,style:{margin:"30px 0"}})),r.createElement(_.Z,{item:!0,xs:12},r.createElement(p.Z,{variant:"h6"},"View and download")),r.createElement(_.Z,{item:!0,xs:2},r.createElement(I.Z,{href:"#",id:"reportHTML",className:"shiny-download-link"},"HTML"),r.createElement(I.Z,{href:"#",id:"reportPDF",className:"shiny-download-link",style:{marginLeft:10}},"PDF"),r.createElement(I.Z,{href:"#",id:"reportLATEX",className:"shiny-download-link",style:{marginLeft:10}},"Latex"),r.createElement(I.Z,{href:"#",id:"reportWORD",className:"shiny-download-link",style:{marginLeft:10}},"MS Word")),r.createElement(_.Z,{item:!0,xs:10},r.createElement(q.Z,{style:{padding:10}},r.createElement("div",{dangerouslySetInnerHTML:{__html:t.reportMgr.report},style:{overflowX:"auto"}}))))))})),Ma=(0,l.Pi)((e=>{const{appMgr:t}=e,a=["downAdjDataCSV","downAdjDataRDS","downAdjDataDTA","downRepDelDataCSV","downRepDelDataRDS","downRepDelDataDTA","downMainFitDetailedRDS","downMainFitCSV","downMainFitRDS","downMainFitDTA","downBootFitDetailedRDS","downBootFitCSV","downBootFitRDS","downBootFitDTA","downBootStatDetailedRDS","downBootStatCSV","downBootStatRDS","downBootStatDTA","downFitEXCEL","downFitEXCEL_NO_MACRO"];r.useEffect((()=>(t.unbindShiny(a),t.bindShiny(),()=>t.unbindShiny(a))));let n=null;n=t.uiStateMgr.adjustmentsOutputsEnabled?r.createElement(r.Fragment,null,r.createElement(I.Z,{download:!0,href:"#",id:"downAdjDataCSV",className:"shiny-download-link"},"csv (text)")," | ",r.createElement(I.Z,{download:!0,href:"#",id:"downAdjDataRDS",className:"shiny-download-link"},"rds (R)")," | ",r.createElement(I.Z,{download:!0,href:"#",id:"downAdjDataDTA",className:"shiny-download-link"},"dta (Stata)")):r.createElement(r.Fragment,null,"csv (text) | rds (R) | dta (Stata)");let l=null;l=t.uiStateMgr.repDelOutputsEnabled?r.createElement(r.Fragment,null,r.createElement(I.Z,{download:!0,href:"#",id:"downRepDelDataCSV",className:"shiny-download-link"},"csv (text)")," | ",r.createElement(I.Z,{download:!0,href:"#",id:"downRepDelDataRDS",className:"shiny-download-link"},"rds (R)")," | ",r.createElement(I.Z,{download:!0,href:"#",id:"downRepDelDataDTA",className:"shiny-download-link"},"dta (Stata)")):r.createElement(r.Fragment,null,"csv (text) | rds (R) | dta (Stata)");let i=null,s=null,o=null;t.uiStateMgr.modellingOutputsEnabled?(i=r.createElement(r.Fragment,null,r.createElement(I.Z,{download:!0,href:"#",id:"downMainFitDetailedRDS",className:"shiny-download-link"},"rds (R)")),s=r.createElement(r.Fragment,null,r.createElement(I.Z,{download:!0,href:"#",id:"downMainFitCSV",className:"shiny-download-link"},"csv (text)")," | ",r.createElement(I.Z,{download:!0,href:"#",id:"downMainFitRDS",className:"shiny-download-link"},"rds (R)")," | ",r.createElement(I.Z,{download:!0,href:"#",id:"downMainFitDTA",className:"shiny-download-link"},"dta (Stata)")),o=r.createElement(r.Fragment,null,r.createElement(I.Z,{download:!0,href:"#",id:"downFitXLSM",className:"shiny-download-link"},"xlsm (Excel with Macro - automatic refresh)")," |",r.createElement("br",null),r.createElement(I.Z,{download:!0,href:"#",id:"downFitXLSX",className:"shiny-download-link"},"xlsx (Excel without Macro - manual refresh)"))):(i=r.createElement(r.Fragment,null,"rds (R)"),s=r.createElement(r.Fragment,null,"csv (text) | rds (R) | dta (Stata)"),o=r.createElement(r.Fragment,null,"xlsm (Excel with Macro - automatic refresh) |",r.createElement("br",null),"xlsx (Excel without Macro - manual refresh)"));let m=null,c=null,d=null,u=null;return t.uiStateMgr.bootstrapOutputsEnabled?(m=r.createElement(r.Fragment,null,r.createElement(I.Z,{download:!0,href:"#",id:"downBootFitDetailedRDS",className:"shiny-download-link"},"rds (R)")),c=r.createElement(r.Fragment,null,r.createElement(I.Z,{download:!0,href:"#",id:"downBootFitCSV",className:"shiny-download-link"},"csv (text)")," | ",r.createElement(I.Z,{download:!0,href:"#",id:"downBootFitRDS",className:"shiny-download-link"},"rds (R)")," | ",r.createElement(I.Z,{download:!0,href:"#",id:"downBootFitDTA",className:"shiny-download-link"},"dta (Stata)")),d=r.createElement(r.Fragment,null,r.createElement(I.Z,{download:!0,href:"#",id:"downBootStatDetailedRDS",className:"shiny-download-link"},"rds (R)")),u=r.createElement(r.Fragment,null,r.createElement(I.Z,{download:!0,href:"#",id:"downBootStatCSV",className:"shiny-download-link"},"csv (text)")," | ",r.createElement(I.Z,{download:!0,href:"#",id:"downBootStatRDS",className:"shiny-download-link"},"rds (R)")," | ",r.createElement(I.Z,{download:!0,href:"#",id:"downBootStatDTA",className:"shiny-download-link"},"dta (Stata)"))):(m=r.createElement(r.Fragment,null,"rds (R)"),c=r.createElement(r.Fragment,null,"csv (text) | rds (R) | dta (Stata)"),d=r.createElement(r.Fragment,null,"rds (R)"),u=r.createElement(r.Fragment,null,"csv (text) | rds (R) | dta (Stata)")),r.createElement(V,null,r.createElement(_.Z,{container:!0,spacing:2,style:{paddingTop:43}},r.createElement(_.Z,{item:!0,xs:12},r.createElement(p.Z,{variant:"h6"},"Outputs")),r.createElement(_.Z,{item:!0,xs:2},"Adjustments"),r.createElement(_.Z,{item:!0,xs:10},r.createElement(q.Z,{style:{padding:10}},r.createElement(G.Z,null,r.createElement(ue.Z,null,r.createElement(J.Z,null,r.createElement(Q.Z,{width:"300px"},"Description"),r.createElement(Q.Z,{width:"320px"},"Format"),r.createElement(Q.Z,null,"Description"))),r.createElement(z.Z,null,r.createElement(J.Z,{hover:!0},r.createElement(Q.Z,null,"Adjusted case-based data"),r.createElement(Q.Z,null,n),r.createElement(Q.Z,null,"Flat table")),r.createElement(J.Z,{hover:!0},r.createElement(Q.Z,null,"Reporting delays distribution"),r.createElement(Q.Z,null,l),r.createElement(Q.Z,null,"Flat table")))))),r.createElement(_.Z,{item:!0,xs:2},"HIV Model"),r.createElement(_.Z,{item:!0,xs:10},r.createElement(q.Z,{style:{padding:10}},r.createElement(G.Z,null,r.createElement(ue.Z,null,r.createElement(J.Z,null,r.createElement(Q.Z,{width:"300px"},"Description"),r.createElement(Q.Z,{width:"320px"},"Format"),r.createElement(Q.Z,null,"Description"))),r.createElement(z.Z,null,r.createElement(J.Z,{hover:!0},r.createElement(Q.Z,null,"Detailed main fit model results"),r.createElement(Q.Z,null,i),r.createElement(Q.Z,null,"R list object")),r.createElement(J.Z,{hover:!0},r.createElement(Q.Z,null,"Main outputs of main fit model"),r.createElement(Q.Z,null,s),r.createElement(Q.Z,null,"Flat table")),r.createElement(J.Z,{hover:!0},r.createElement(Q.Z,null,"Detailed bootstrap fits model results"),r.createElement(Q.Z,null,m),r.createElement(Q.Z,null,"R list object")),r.createElement(J.Z,{hover:!0},r.createElement(Q.Z,null,"Main outputs of bootstrap fits"),r.createElement(Q.Z,null,c),r.createElement(Q.Z,null,"Flat table")),r.createElement(J.Z,{hover:!0},r.createElement(Q.Z,null,"Detailed bootstrap statistics results"),r.createElement(Q.Z,null,d),r.createElement(Q.Z,null,"R list object")),r.createElement(J.Z,{hover:!0},r.createElement(Q.Z,null,"Main outputs bootstrap statistics"),r.createElement(Q.Z,null,u),r.createElement(Q.Z,null,"Flat table")),r.createElement(J.Z,{hover:!0},r.createElement(Q.Z,null,"Main outputs of main fit and bootstrap"),r.createElement(Q.Z,null,o),r.createElement(Q.Z,null,"Excel file with tables and charts"))))))))}));var ya=a(1857),Da=a(3550);const ba=(0,l.Pi)((e=>{const{notificationsMgr:t}=e,a=(e,a)=>{"clickaway"!==a&&t.clearMsg()};return r.createElement(ya.Z,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:t.hasMsg,autoHideDuration:5e3,onClose:a,message:t.msgInfo.msg,action:r.createElement(r.Fragment,null,r.createElement(E.Z,{size:"small","aria-label":"close",color:"inherit",onClick:a},r.createElement(Da.Z,{fontSize:"small"})))})}));function Sa(){return(Sa=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}const Za=(0,d.Z)({appBar:{padding:3},appName:{color:"white",marginLeft:10},appVersion:{color:"white",marginRight:10},rightNavBtn:{color:"white"}}),fa=e=>{const{pageId:t,activePageId:a,children:n,...l}=e;return r.createElement(p.Z,Sa({component:"div",role:"tabpanel",hidden:a!==t,id:`wrapped-tabpanel-${t}`,"aria-labelledby":`wrapped-tab-${t}`,style:{flexGrow:1,overflowY:"scroll"}},l),a===t&&r.createElement(h.Z,{p:2},n))},Ca=(0,l.f3)("appMgr")((0,l.Pi)((e=>{const{appMgr:t}=e,a=Za(),[n,l]=r.useState(!1);{const e=e=>{e.preventDefault(),e.returnValue=""};r.useEffect((()=>(window.addEventListener("beforeunload",e),()=>window.removeEventListener("beforeunload",e))),[])}const i=t.shinyReady?"#69b023":"#f44336",s=r.createElement(u.Z,{position:"static",className:a.appBar,style:{backgroundColor:`${i}`}},r.createElement(g.Z,{variant:"dense",disableGutters:!0},r.createElement(p.Z,{variant:"h6",className:a.appName},"HIV Platform"),r.createElement(p.Z,{variant:"subtitle1",className:a.appVersion}," | version ","1.9.59"),r.createElement(h.Z,{flexGrow:1}),r.createElement(p.Z,{variant:"subtitle1",className:a.appVersion},"Engine state: ",t.shinyStateHuman),r.createElement(E.Z,{onClick:()=>l(!n),className:a.rightNavBtn},r.createElement(M.Z,null))));return r.createElement(h.Z,{display:"flex",flexGrow:1,flexDirection:"column",style:{overflow:"hidden"},p:0},r.createElement(N,Sa({},e,{open:n,onClose:()=>l(!1)})),s,r.createElement(h.Z,{display:"flex",flexGrow:1,flexDirection:"row",style:{overflow:"hidden"},p:0},r.createElement(x,{pages:t.uiStateMgr.pages,activePageId:t.uiStateMgr.activePageId,onPageChange:(e,a)=>{t.uiStateMgr.setActivePageId(e,a)}}),r.createElement(fa,{pageId:0,activePageId:t.uiStateMgr.activePageId},r.createElement(k,e)),r.createElement(fa,{pageId:1,activePageId:t.uiStateMgr.activePageId},r.createElement(Ne,e)),r.createElement(fa,{pageId:2,activePageId:t.uiStateMgr.activePageId},r.createElement(ut,e)),r.createElement(fa,{pageId:3,activePageId:t.uiStateMgr.activePageId},r.createElement(At,e)),r.createElement(fa,{pageId:4,activePageId:t.uiStateMgr.activePageId},r.createElement(ga,e)),r.createElement(fa,{pageId:5,activePageId:t.uiStateMgr.activePageId},r.createElement(Ea,e)),r.createElement(fa,{pageId:6,activePageId:t.uiStateMgr.activePageId},r.createElement(Ma,e))),r.createElement(ba,{notificationsMgr:t.notificationsMgr}))}))),va=(0,m.Z)({typography:{fontSize:12},palette:{primary:{main:"#69b023"},secondary:{main:"#bedfe1"}},overrides:{MuiStepLabel:{label:{color:"black","&$active":{fontWeight:"bold"},"&$completed":{fontWeight:"bold"}},root:{"&$disabled":{"& .MuiStepLabel-label":{color:"rgba(0, 0, 0, 0.5)"}}}},MuiStepIcon:{root:{"& text":{fill:"white"}}},MuiStepConnector:{vertical:{marginLeft:10}},MuiStepContent:{root:{marginLeft:10,"& .MuiTreeItem-label":{padding:6}}},MuiTreeItem:{label:{fontSize:"0.75rem"}},MuiTableRow:{root:{"&:last-child td":{borderBottom:0}}},MuiTableCell:{head:{fontWeight:"bold !important"}},MuiSlider:{marked:{marginBottom:0}},MuiSelect:{root:{paddingLeft:16,paddingBottom:5}}}}),xa=()=>r.createElement(c.Z,{theme:va},r.createElement(r.Fragment,null,r.createElement(o.ZP,null),r.createElement(Ca,null)));var Pa=a(7646),Ia=a(7849);const Aa=(e,t)=>-1!==t.indexOf(e);class Ra{constructor(e){this.rootMgr=null,this.lastEventType=null,this.completedSteps=null,this.pages=[{title:"Welcome",completed:!1,disabled:!1,subPages:[]},{title:"Input data upload",completed:!1,disabled:!0,subPages:[{title:"Case-based data",disabled:!1},{title:"Aggregated data",disabled:!1}],activeSubPageId:0},{title:"Case-based data summary",completed:!1,disabled:!0,subPages:[],description:"Subset of case-based data can be selected here for adjustments and modelling"},{title:"Adjustments",completed:!1,disabled:!0,subPages:[{title:"Inputs",disabled:!1},{title:"Run",disabled:!1}],activeSubPageId:0},{title:"Modelling",completed:!1,disabled:!0,subPages:[{title:"Populations",disabled:!1},{title:"Inputs",disabled:!1},{title:"Advanced",disabled:!1},{title:"Run Main Fit",disabled:!1},{title:"Run Bootstrap",disabled:!1},{title:"Tables and charts",disabled:!1}],activeSubPageId:0},{title:"Reports",completed:!1,disabled:!0,subPages:[]},{title:"Outputs",completed:!1,disabled:!0,subPages:[]}],this.activePageId=0,this.setCompletedSteps=e=>{this.completedSteps=Ot(e),this.refreshPagesStatus()},this.setActivePageId=(e,t=-1)=>{this.pages[e].disabled?this.rootMgr.notificationsMgr.setMsg("Page this link refers to is not enabled"):(this.activePageId=e,-1!==t&&t<this.pages[e].subPages.length&&(this.pages[e].activeSubPageId=t),this.refreshPagesStatus())},this.setSubPageDisabledStatus=(e,t,a)=>{this.pages[e].subPages[t].disabled=a},this.setLastEventType=e=>this.lastEventType=e,this.refreshPagesStatus=()=>{this.pages[0].completed=this.activePageId>0,this.pages[1].completed=this.activePageId>1,this.pages[2].completed=this.activePageId>2,this.pages[3].completed=this.activePageId>3,this.pages[1].disabled=!this.uploadPageEnabled,this.pages[2].disabled=!this.summaryPageEnabled,this.pages[3].disabled=!this.adjustmentsPageEnabled,this.pages[4].disabled=!this.modellingPageEnabled,this.pages[5].disabled=!this.reportsPageEnabled,this.pages[6].disabled=!this.outputsPageEnabled,this.setSubPageDisabledStatus(4,4,!this.bootstrapEnabled),this.setSubPageDisabledStatus(4,5,!this.modellingOutputsEnabled)},this.rootMgr=e,(0,Pa.rC)(this,{completedSteps:Pa.LO,setCompletedSteps:Pa.aD,pages:Pa.LO,pagesTitles:Pa.Fl,activePageId:Pa.LO,setActivePageId:Pa.aD,setSubPageDisabledStatus:Pa.aD,lastEventType:Pa.LO,setLastEventType:Pa.aD,uploadPageEnabled:Pa.Fl,summaryPageEnabled:Pa.Fl,adjustmentsPageEnabled:Pa.Fl,modellingPageEnabled:Pa.Fl,reportsPageEnabled:Pa.Fl,outputsPageEnabled:Pa.Fl,caseBasedAttrMappingEnabled:Pa.Fl,caseBasedOrigGroupingEnabled:Pa.Fl,bootstrapEnabled:Pa.Fl,adjustmentsOutputsEnabled:Pa.Fl,repDelOutputsEnabled:Pa.Fl,modellingOutputsEnabled:Pa.Fl,bootstrapOutputsEnabled:Pa.Fl,caseBasedDataUnloadEnabled:Pa.Fl,aggrDataUnloadEnabled:Pa.Fl})}get pagesTitles(){return this.pages.map((e=>e.title))}get activeSubPageId(){return this.pages[this.activePageId].activeSubPageId}get uploadPageEnabled(){return Aa("SESSION_INITIALIZED",this.completedSteps)}get summaryPageEnabled(){return Aa("CASE_BASED_SUMMARY",this.completedSteps)}get adjustmentsPageEnabled(){return Aa("CASE_BASED_ORIGIN_GROUPING",this.completedSteps)}get modellingPageEnabled(){return Aa("CASE_BASED_ORIGIN_GROUPING",this.completedSteps)||Aa("AGGR_READ",this.completedSteps)}get reportsPageEnabled(){return Aa("CASE_BASED_ADJUSTMENTS",this.completedSteps)}get outputsPageEnabled(){return Aa("CASE_BASED_ADJUSTMENTS",this.completedSteps)||Aa("MODELLING",this.completedSteps)}get caseBasedAttrMappingEnabled(){return Aa("CASE_BASED_READ",this.completedSteps)}get caseBasedDataUnloadEnabled(){return Aa("CASE_BASED_READ",this.completedSteps)}get aggrDataUnloadEnabled(){return Aa("AGGR_READ",this.completedSteps)}get caseBasedOrigGroupingEnabled(){return Aa("CASE_BASED_ATTR_MAPPING",this.completedSteps)}get bootstrapEnabled(){return Aa("MODELLING",this.completedSteps)}get nonParametricBootstrapEnabled(){return Aa("CASE_BASED_ORIGIN_GROUPING",this.completedSteps)}get adjustmentsOutputsEnabled(){return Aa("CASE_BASED_ADJUSTMENTS",this.completedSteps)}get repDelOutputsEnabled(){return Aa("CASE_BASED_ADJUSTMENTS",this.completedSteps)&&Aa("REPORTING_DELAYS",this.rootMgr.adjustMgr.runAdjustmentsTypes)}get modellingOutputsEnabled(){return Aa("MODELLING",this.completedSteps)}get bootstrapOutputsEnabled(){return Aa("BOOTSTRAP",this.completedSteps)}}const Na=e=>`${e}_${("000000"+(2176782336*Math.random()<<0).toString(36)).slice(-6)}`;class _a{constructor(e){this.rootMgr=null,this.msgInfo={key:null,msg:null},this.setMsg=e=>{this.msgInfo={msg:e,key:Na("msg")}},this.clearMsg=()=>{this.msgInfo={key:null,msg:null}},this.rootMgr=e,(0,Pa.rC)(this,{msgInfo:Pa.LO,setMsg:Pa.aD,clearMsg:Pa.aD,hasMsg:Pa.Fl})}get hasMsg(){return null!==this.msgInfo.msg}}class Fa{constructor(e){this.rootMgr=null,this.mapping=[],this.actionStatus=null,this.actionMessage=null,this.setMapping=e=>{this.mapping=e,this.runCheck()},this.setActionStatus=e=>this.actionStatus=e,this.setActionMessage=e=>this.actionMessage=e,this.setOrigCol=(e,t)=>{const a=this.mapping.findIndex((t=>t.attribute===e));-1!==a?(this.mapping[a].origColName=""!==t?t:null,this.runCheck()):console.log(`AttrMappingManager.setOrigCol: cannot find element with Attribute "${e}"`)},this.setDefVal=(e,t)=>{const a=this.mapping.findIndex((t=>t.attribute===e));-1!==a?(this.mapping[a].defaultValue=""!==t?t:null,this.runCheck()):console.log(`AttrMappingManager.setDefVal: cannot find element with Attribute "${e}"`)},this.applyMapping=()=>{this.rootMgr.btnClicked("attrMapping:AttrMappingArray",this.mapping)},this.runCheck=()=>{const e=[...this.mapping.filter((e=>e.origColName)).map((e=>e.origColName)).reduce(((e,t)=>e.set(t,(e.get(t)||0)+1)),new Map)].filter((e=>e[1]>1)).map((e=>e[0]));let t=null,a=null;e.length>0?(a="FAIL",t=`Column${e.length>1?"s":""} "${e.join(", ")}" ${e.length>1?"are":"is"} mapped multiple times`):(a="SUCCESS",t="Attribute mapping is valid"),this.setActionStatus(a),this.setActionMessage(t)},this.rootMgr=e,(0,Pa.rC)(this,{mapping:Pa.LO,actionStatus:Pa.LO,actionMessage:Pa.LO,setMapping:Pa.aD,setOrigCol:Pa.aD,setDefVal:Pa.aD,applyMapping:Pa.aD,setActionStatus:Pa.aD,setActionMessage:Pa.aD,actionValid:Pa.Fl})}get actionValid(){return C(this.actionStatus)?null:"SUCCESS"===this.actionStatus}}const Ta=(e,t)=>{t=Ot(t);return e.filter(((e,a)=>-1===t.indexOf(a)))};class wa{constructor(e){this.rootMgr=null,this.distribution={origin:[],count:[]},this.groupings=[],this.type="REPCOUNTRY + UNK + OTHER",this.actionStatus=null,this.actionMessage=null,this.setDistribution=e=>this.distribution=e,this.setGroupings=e=>{const t=e.map((e=>{const t=Array.isArray(e.origin)?e.origin:[e.origin];return{name:e.name,origin:t,groupCount:0}}));this.groupings=t,this.computeGroupCounts()},this.setType=e=>this.type=e,this.setActionStatus=e=>this.actionStatus=e,this.setActionMessage=e=>this.actionMessage=e,this.setGroupName=(e,t)=>{this.groupings[e].name=t,this.type="Custom"},this.setGroupOrigin=(e,t)=>{this.groupings[e].origin=t,this.computeGroupCounts(),this.type="Custom"},this.removeGroupings=e=>{this.groupings=Ta(this.groupings,e),this.computeGroupCounts(),this.type="Custom"},this.addEmptyGrouping=()=>{this.groupings.push({name:"New",groupeCount:0,origin:[]}),this.computeGroupCounts(),this.type="Custom"},this.applyGroupings=()=>{this.rootMgr.btnClicked("originGrouping:OriginGroupingArray",this.groupings)},this.computeGroupCounts=()=>{this.groupings.forEach((e=>{const t=e.origin.reduce(((e,t)=>{const a=this.distributionArray.findIndex((e=>e.origin==t));return-1!==a?e+this.distributionArray[a].count:e}),0);e.groupCount=t}))},this.rootMgr=e,(0,Pa.rC)(this,{distribution:Pa.LO,groupings:Pa.LO,type:Pa.LO,actionStatus:Pa.LO,actionMessage:Pa.LO,distributionArray:Pa.Fl,origins:Pa.Fl,usedOrigins:Pa.Fl,unusedOrigins:Pa.Fl,groupingsJS:Pa.Fl,setDistribution:Pa.aD,setGroupings:Pa.aD,setType:Pa.aD,setGroupName:Pa.aD,setGroupOrigin:Pa.aD,removeGroupings:Pa.aD,addEmptyGrouping:Pa.aD,applyGroupings:Pa.aD,setActionStatus:Pa.aD,setActionMessage:Pa.aD,actionValid:Pa.Fl})}get distributionArray(){const e=this.distribution.origin,t=this.distribution.count;return e.map(((a,r)=>({origin:e[r],count:t[r]})))}get origins(){return this.distribution.origin.slice().sort()}get usedOrigins(){return[].concat.apply([],this.groupings.map((e=>e.origin)))}get unusedOrigins(){return this.origins.filter((e=>!this.usedOrigins.includes(e)))}get groupingsJS(){return(0,Pa.ZN)(this.groupings)}get actionValid(){return C(this.actionStatus)?null:"SUCCESS"===this.actionStatus}}var Ya=function(e){this.files=e,this.fileIndex=-1,this.aborted=!1,this.completed=!1,this.$run()};function Oa(e,t,a){(e=>{var t=e.data("currentUploader");t&&t.abort(),e.removeAttr("data-restore")})($(t));var r=t.files;0!==r.length&&(this.shinyapp=e,this.id=t.id,this.el=t,this.progressCallback=a,Ya.call(this,r))}(function(){this.onBegin=function(e,t){setTimeout(t,0)},this.onFile=function(e,t){setTimeout(t,0)},this.onComplete=function(){},this.onAbort=function(){},this.abort=function(){this.completed||this.aborted||(this.aborted=!0,this.onAbort())},this.$getRun=function(){var e=this,t=!1;return function(){t||(t=!0,e.$run())}},this.$run=function(){if(!this.aborted&&!this.completed){if(this.fileIndex<0)return this.fileIndex=0,void this.onBegin(this.files,this.$getRun());if(this.fileIndex===this.files.length)return this.completed=!0,void this.onComplete();var e=this.files[this.fileIndex++];this.onFile(e,this.$getRun())}}}).call(Ya.prototype),$.extend(Oa.prototype,Ya.prototype),function(){this.makeRequest=function(e,t,a,r,n){this.shinyapp.makeRequest(e,t,a,r,n)},this.onBegin=function(e,t){var a=this;this.onProgress(0),this.totalBytes=0,this.progressBytes=0,$.each(e,(function(e,t){a.totalBytes+=t.size}));var r=$.map(e,(function(e){return{name:e.name,size:e.size,type:e.type}}));this.makeRequest("uploadInit",[r],(function(e){a.jobId=e.jobId,a.uploadUrl=e.uploadUrl,t()}),(function(e){a.onError(e)}))},this.onFile=function(e,t){var a=this;this.onProgress(0),$.ajax(this.uploadUrl,{type:"POST",cache:!1,xhr:function(){var e=$.ajaxSettings.xhr();return e.upload&&(e.upload.onprogress=function(e){e.lengthComputable&&a.onProgress((a.progressBytes+e.loaded)/a.totalBytes)}),e},data:e,contentType:"application/octet-stream",processData:!1,success:function(){a.progressBytes+=e.size,t()},error:function(e,t){a.onError(e.responseText||t)}})},this.onComplete=function(){var e=this,t=$.map(this.files,(function(e){return{name:e.name,size:e.size,type:e.type}})),a=jQuery.Event("shiny:inputchanged");a.name=this.id,a.value=t,a.el=this.el,a.inputType="shiny.fileupload",$(document).trigger(a),this.makeRequest("uploadEnd",[this.jobId,this.id],(function(){e.onProgress(null)}),(function(t){e.onError(t)}))},this.onError=function(e){console.log("onError: ",e),this.progressCallback(null)},this.onAbort=function(){console.log("onAbort"),this.progressCallback(null)},this.onProgress=function(e){this.progressCallback(e)}}.call(Oa.prototype);class La{constructor(e){this.rootMgr=null,this.fileName=null,this.fileSize=null,this.fileType=null,this.filePath=null,this.columnNames=[],this.recordCount=null,this.uploadProgress=null,this.actionStatus=null,this.actionMessage=null,this.setFileName=e=>this.fileName=e,this.setFileSize=e=>this.fileSize=e,this.setFileType=e=>this.fileType=e,this.setFilePath=e=>this.filePath=e,this.setRecordCount=e=>this.recordCount=e,this.setColumnNames=e=>this.columnNames=Ot(e),this.setUploadProgress=e=>this.uploadProgress=e,this.setActionStatus=e=>this.actionStatus=e,this.setActionMessage=e=>this.actionMessage=e,this.uploadData=e=>{$(e).data("currentUploader",new Oa(Shiny.shinyapp,e,this.setUploadProgress))},this.rootMgr=e,(0,Pa.rC)(this,{fileName:Pa.LO,fileSize:Pa.LO,fileType:Pa.LO,filePath:Pa.LO,columnNames:Pa.LO,recordCount:Pa.LO,uploadProgress:Pa.LO,actionStatus:Pa.LO,actionMessage:Pa.LO,setFileName:Pa.aD,setFileSize:Pa.aD,setFileType:Pa.aD,setFilePath:Pa.aD,setRecordCount:Pa.aD,setColumnNames:Pa.aD,setColumnNames:Pa.aD,uploadData:Pa.aD,setUploadProgress:Pa.aD,setActionStatus:Pa.aD,setActionMessage:Pa.aD,columnNamesString:Pa.Fl,actionValid:Pa.Fl})}get columnNamesString(){return null===this.columnNames?"":this.columnNames.join(", ")}get actionValid(){return C(this.actionStatus)?null:"SUCCESS"===this.actionStatus}}class ja{constructor(e){this.rootMgr=null,this.fileName=null,this.fileSize=null,this.fileType=null,this.filePath=null,this.dataFiles=[],this.origDataFiles=[],this.rangeYears=null,this.dataFileNameToIdxMap=new Map,this.populationNames=[],this.fileUploadProgress=null,this.actionStatus=null,this.actionMessage=null,this.setFileName=e=>this.fileName=e,this.setFileSize=e=>this.fileSize=e,this.setFileType=e=>this.fileType=e,this.setFilePath=e=>this.filePath=e,this.setDataFiles=e=>{this.origDataFiles=Ot(e),this.dataFiles=Ot(e),this.dataFileNameToIdxMap=new Map(this.dataFiles.map(((e,t)=>[e.name,t])))},this.setDataFileUse=(e,t)=>this.dataFiles[this.dataFileNameToIdxMap.get(e)].use=t,this.setDataFileYears=(e,t)=>this.dataFiles[this.dataFileNameToIdxMap.get(e)].years=t,this.setPopulationNames=e=>this.populationNames=Ot(e).sort(),this.setFileUploadProgress=e=>this.fileUploadProgress=e,this.setRangeYears=e=>this.rangeYears=e,this.uploadData=e=>{$(e).data("currentUploader",new Oa(Shiny.shinyapp,e,this.setFileUploadProgress))},this.setActionStatus=e=>this.actionStatus=e,this.setActionMessage=e=>this.actionMessage=e,this.rootMgr=e,(0,Pa.rC)(this,{fileName:Pa.LO,fileSize:Pa.LO,fileType:Pa.LO,filePath:Pa.LO,populationNames:Pa.LO,fileUploadProgress:Pa.LO,dataFiles:Pa.LO,origDataFiles:Pa.LO,rangeYears:Pa.LO,actionStatus:Pa.LO,actionMessage:Pa.LO,dataNames:Pa.Fl,dataNamesString:Pa.Fl,populationNamesString:Pa.Fl,setFileName:Pa.aD,setFileSize:Pa.aD,setFileType:Pa.aD,setFilePath:Pa.aD,setDataFiles:Pa.aD,setDataFileUse:Pa.aD,setDataFileYears:Pa.aD,setPopulationNames:Pa.aD,setFileUploadProgress:Pa.aD,uploadData:Pa.aD,setActionStatus:Pa.aD,setActionMessage:Pa.aD,setRangeYears:Pa.aD,actionValid:Pa.Fl}),(0,Pa.EH)((()=>this.rootMgr.inputValueSet("aggrFilters:AggrFilters",this.dataFiles)),{delay:1e3})}get dataNames(){return this.dataFiles.map((e=>e.name))}get dataNamesString(){return null===this.dataNames?"":this.dataNames.join(", ")}get populationNamesString(){return null===this.populationNames?"":this.populationNames.join(", ")}get actionValid(){return C(this.actionStatus)?null:"SUCCESS"===this.actionStatus}}class ka{constructor(e){this.rootMgr=null,this.selectedCount=null,this.totalCount=null,this.diagYearPlotData={filter:{scaleMinYear:null,scaleMaxYear:null,valueMinYear:null,valueMaxYear:null,applyInAdjustments:null},chartCategories:[],chartData:[]},this.notifQuarterPlotData={filter:{scaleMinYear:null,scaleMaxYear:null,valueMinYear:null,valueMaxYear:null,applyInAdjustments:null},chartCategories:[],chartData:[]},this.missPlotData={plot1:{chartCategories:[],chartData:{all:[],female:[],male:[]}},plot2:{chartCategories:[],chartData:{all:[],female:[],male:[]}},plot3:{chartData:{all:[],female:[],male:[]}},plot4:{chartCategories:[],chartData:{all:[],female:[],male:[]}}},this.missPlotSelection="all",this.repDelPlotData={chartData:{all:{q95:0,series:[]},female:{q95:0,series:[]},male:{q95:0,series:[]}}},this.repDelPlotSelection="all",this.setSelectedCount=e=>this.selectedCount=e,this.setTotalCount=e=>this.totalCount=e,this.setDiagYearPlotData=e=>this.diagYearPlotData=e,this.setDiagYearFilterApply=e=>this.diagYearPlotData.filter.applyInAdjustments=e,this.setDiagYearFilterMinYear=e=>{this.diagYearPlotData.filter.valueMinYear!==e&&(this.diagYearPlotData.filter.valueMinYear=e)},this.setDiagYearFilterMaxYear=e=>{this.diagYearPlotData.filter.valueMaxYear!==e&&(this.diagYearPlotData.filter.valueMaxYear=e)},this.setNotifQuarterPlotData=e=>this.notifQuarterPlotData=e,this.setNotifQuarterFilterApply=e=>this.notifQuarterPlotData.filter.applyInAdjustments=e,this.setNotifQuarterFilterMinYear=e=>{this.notifQuarterPlotData.filter.valueMinYear!==e&&(this.notifQuarterPlotData.filter.valueMinYear=e)},this.setNotifQuarterFilterMaxYear=e=>{this.notifQuarterPlotData.filter.valueMaxYear!==e&&(this.notifQuarterPlotData.filter.valueMaxYear=e)},this.setMissPlotData=e=>this.missPlotData=e,this.setMissPlotSelection=e=>this.missPlotSelection=e,this.setRepDelPlotData=e=>this.repDelPlotData=e,this.setRepDelPlotSelection=e=>this.repDelPlotSelection=e,this.reset=()=>{this.selectedCount=null,this.totalCount=null,this.diagYearPlotData={filter:{scaleMinYear:null,scaleMaxYear:null,valueMinYear:null,valueMaxYear:null,applyInAdjustments:!1},chartCategories:[],chartData:[]},this.notifQuarterPlotData={filter:{scaleMinYear:null,scaleMaxYear:null,valueMinYear:null,valueMaxYear:null,applyInAdjustments:!1},chartCategories:[],chartData:[]},this.missPlotData={plot1:{chartCategories:[],chartData:{all:[],female:[],male:[]}},plot2:{chartCategories:[],chartData:{all:[],female:[],male:[]}},plot3:{chartData:{all:[],female:[],male:[]}},plot4:{chartCategories:[],chartData:{all:[],female:[],male:[]}}},this.missPlotSelection="all",this.repDelPlotData={chartData:{all:{q95:0,series:[]},female:{q95:0,series:[]},male:{q95:0,series:[]}}},this.repDelPlotSelection="all"},this.rootMgr=e,(0,Pa.rC)(this,{selectedCount:Pa.LO,totalCount:Pa.LO,diagYearPlotData:Pa.LO,notifQuarterPlotData:Pa.LO,missPlotData:Pa.LO,missPlotSelection:Pa.LO,repDelPlotData:Pa.LO,repDelPlotSelection:Pa.LO,reset:Pa.aD,setSelectedCount:Pa.aD,setTotalCount:Pa.aD,setDiagYearPlotData:Pa.aD,setDiagYearFilterApply:Pa.aD,setDiagYearFilterMinYear:Pa.aD,setDiagYearFilterMaxYear:Pa.aD,setNotifQuarterPlotData:Pa.aD,setNotifQuarterFilterApply:Pa.aD,setNotifQuarterFilterMinYear:Pa.aD,setNotifQuarterFilterMaxYear:Pa.aD,setMissPlotData:Pa.aD,setMissPlotSelection:Pa.aD,setRepDelPlotData:Pa.aD,setRepDelPlotSelection:Pa.aD,notifQuarterSliderMarks:Pa.Fl,notifQuarterChartCategories:Pa.Fl,missPlot1Series:Pa.Fl,missPlot2Series:Pa.Fl,missPlot3Series:Pa.Fl,missPlot4Series:Pa.Fl,repDelPlot:Pa.Fl,missPlot3Categories:Pa.Fl,missPlot4Categories:Pa.Fl,filters:Pa.Fl}),(0,Pa.EH)((()=>this.rootMgr.inputValueSet("summaryFilters",this.filters)),{delay:1e3})}get notifQuarterSliderMarks(){return this.notifQuarterPlotData.chartCategories.map((e=>({value:e,label:""})))}get notifQuarterChartCategories(){return this.notifQuarterPlotData.chartCategories.map((e=>Qe(e)))}get missPlot1Series(){return this.missPlotData.plot1.chartData[this.missPlotSelection]}get missPlot2Series(){return this.missPlotData.plot2.chartData[this.missPlotSelection]}get missPlot3Series(){const e=this.missPlotData.plot3.chartData[this.missPlotSelection];let t=["Present","Missing"].map((t=>e.map((e=>e.name===t?e.y:0))));return t[2]=e.map((e=>rt(e.y))),t}get missPlot4Series(){return this.missPlotData.plot4.chartData[this.missPlotSelection]}get repDelPlot(){const e=(0,Pa.ZN)(this.repDelPlotData.chartData[this.repDelPlotSelection]);return{q95:e.q95,series:[{name:"density",data:e.series}]}}get missPlot3Categories(){return this.missPlotData.plot3.chartData[this.missPlotSelection].map((e=>`${(100*e.y).toFixed(2)} %`))}get missPlot4Categories(){return this.missPlotData.plot4.chartCategories}get filters(){return{DiagYear:{ApplyInAdjustments:this.diagYearPlotData.filter.applyInAdjustments,MinYear:this.diagYearPlotData.filter.valueMinYear,MaxYear:this.diagYearPlotData.filter.valueMaxYear},NotifQuarter:{ApplyInAdjustments:this.notifQuarterPlotData.filter.applyInAdjustments,MinYear:this.notifQuarterPlotData.filter.valueMinYear,MaxYear:this.notifQuarterPlotData.filter.valueMaxYear}}}}class Ba{constructor(e){this.rootMgr=null,this.miAdjustType="none",this.miJomoSettings={nimp:5,nburn:1e3,nbetween:500,nsdf:4,imputeRD:!1},this.miMiceSettings={nimp:5,nit:5,nsdf:4,imputeRD:!1},this.rdAdjustType="none",this.dataBounds={startYear:2e3,endYear:2017,endQrt:1},this.rdWithoutTrendSettings={startYear:2e3,endYear:2017,endQrt:1,stratGender:!1,stratTrans:!1,stratMigr:!1},this.rdWithTrendSettings={startYear:2e3,endYear:2017,endQrt:1,stratGender:!1,stratTrans:!1,stratMigr:!1},this.adjustmentsRunProgress=null,this.adjustmentsRunLog=null,this.adjustmentsReport=null,this.runAdjustmentsTypes=[],this.setRunAdjustmentsTypes=e=>this.runAdjustmentsTypes=Ot(e),this.setMIAdjustType=e=>this.miAdjustType=e,this.setMIJomoNimp=e=>this.miJomoSettings.nimp=e,this.setMIJomoNburn=e=>this.miJomoSettings.nburn=e,this.setMIJomoNbetween=e=>this.miJomoSettings.nbetween=e,this.setMIJomoNsdf=e=>this.miJomoSettings.nsdf=e,this.setMIJomoImputeRD=e=>this.miJomoSettings.imputeRD=e,this.setMIMiceNimp=e=>this.miMiceSettings.nimp=e,this.setMIMiceNit=e=>this.miMiceSettings.nit=e,this.setMIMiceNsdf=e=>this.miMiceSettings.nsdf=e,this.setMIMiceImputeRD=e=>this.miMiceSettings.imputeRD=e,this.restoreMIDefaults=e=>{"jomo"===e?this.miJomoSettings={nimp:5,nburn:1e3,nbetween:500,nsdf:4,imputeRD:!1}:"mice"===e&&(this.miMiceSettings={nimp:5,nit:5,nsdf:4,imputeRD:!1})},this.setRDAdjustType=e=>this.rdAdjustType=e,this.setRDWithoutStartYear=e=>this.rdWithoutTrendSettings.startYear=e,this.setRDWithoutEndYear=e=>this.rdWithoutTrendSettings.endYear=e,this.setRDWithoutEndQrt=e=>this.rdWithoutTrendSettings.endQrt=e,this.setRDWithoutStratGender=e=>this.rdWithoutTrendSettings.stratGender=e,this.setRDWithoutStratTrans=e=>this.rdWithoutTrendSettings.stratTrans=e,this.setRDWithoutStratMigr=e=>this.rdWithoutTrendSettings.stratMigr=e,this.setRDWithStartYear=e=>this.rdWithTrendSettings.startYear=e,this.setRDWithEndYear=e=>this.rdWithTrendSettings.endYear=e,this.setRDWithEndQrt=e=>this.rdWithTrendSettings.endQrt=e,this.setRDWithStratGender=e=>this.rdWithTrendSettings.stratGender=e,this.setRDWithStratTrans=e=>this.rdWithTrendSettings.stratTrans=e,this.setRDWithStratMigr=e=>this.rdWithTrendSettings.stratMigr=e,this.setDataBounds=e=>this.dataBounds=e,this.restoreRDDefaults=e=>{"withoutTrend"===e?this.rdWithoutTrendSettings={startYear:this.dataBounds.startYear,endYear:this.dataBounds.endYear,endQrt:this.dataBounds.endQrt,stratGender:!1,stratTrans:!1,stratMigr:!1}:"withTrend"===e&&(this.rdWithTrendSettings={startYear:this.dataBounds.startYear,endYear:this.dataBounds.endYear,endQrt:this.dataBounds.endQrt,stratGender:!1,stratTrans:!1,stratMigr:!1})},this.runAdjustments=()=>{this.rootMgr.btnClicked("runAdjustBtn",{MIAdjustType:this.miAdjustType,MIParams:this.miParams,RDAdjustType:this.rdAdjustType,RDParams:this.rdParams})},this.cancelAdjustments=()=>this.rootMgr.btnClicked("cancelAdjustBtn"),this.setAdjustmentsRunProgress=e=>this.adjustmentsRunProgress=e,this.setAdjustmentsRunLog=e=>this.adjustmentsRunLog=e,this.setAdjustmentsReport=e=>this.adjustmentsReport=e,this.rootMgr=e,(0,Pa.rC)(this,{miAdjustType:Pa.LO,miJomoSettings:Pa.LO,miMiceSettings:Pa.LO,rdAdjustType:Pa.LO,rdWithoutTrendSettings:Pa.LO,rdWithTrendSettings:Pa.LO,adjustmentsRunProgress:Pa.LO,adjustmentsRunLog:Pa.LO,adjustmentsReport:Pa.LO,runAdjustmentsTypes:Pa.LO,miParams:Pa.Fl,rdParams:Pa.Fl,adjustmentSelected:Pa.Fl,adjustmentsRunInProgress:Pa.Fl,setRunAdjustmentsTypes:Pa.aD,setMIAdjustType:Pa.aD,setRDAdjustType:Pa.aD,setMIJomoNimp:Pa.aD,setMIJomoNburn:Pa.aD,setMIJomoNbetween:Pa.aD,setMIJomoNsdf:Pa.aD,setMIJomoImputeRD:Pa.aD,setMIMiceNimp:Pa.aD,setMIMiceNit:Pa.aD,setMIMiceNsdf:Pa.aD,setMIMiceImputeRD:Pa.aD,restoreMIDefaults:Pa.aD,restoreRDDefaults:Pa.aD,setRDWithoutStartYear:Pa.aD,setRDWithoutEndYear:Pa.aD,setRDWithoutEndQrt:Pa.aD,setRDWithoutStratGender:Pa.aD,setRDWithoutStratTrans:Pa.aD,setRDWithoutStratMigr:Pa.aD,setRDWithStartYear:Pa.aD,setRDWithEndYear:Pa.aD,setRDWithEndQrt:Pa.aD,setRDWithStratGender:Pa.aD,setRDWithStratTrans:Pa.aD,setRDWithStratMigr:Pa.aD,runAdjustments:Pa.aD,cancelAdjustments:Pa.aD,setAdjustmentsRunProgress:Pa.aD,setAdjustmentsRunLog:Pa.aD,setAdjustmentsReport:Pa.aD,setDataBounds:Pa.aD}),(0,Pa.EH)((()=>{this.rootMgr.uiStateMgr.setSubPageDisabledStatus(3,1,!this.adjustmentSelected)}))}get miParams(){let e=null;return"jomo"===this.miAdjustType?e=this.miJomoSettings:"mice"===this.miAdjustType&&(e=this.miMiceSettings),e}get rdParams(){let e=null;return"withoutTrend"===this.rdAdjustType?e=this.rdWithoutTrendSettings:"withTrend"===this.rdAdjustType&&(e=this.rdWithTrendSettings),e}get adjustmentSelected(){return"none"!==this.miAdjustType||"none"!==this.rdAdjustType}get adjustmentsRunInProgress(){return null!==this.adjustmentsRunProgress}}class Ua{constructor(e){this.rootMgr=null,this.availableVariables=[],this.availableStrata={},this.populations=[],this.addEmptyPopulation=()=>{this.populations.push({id:Na("Population"),variables:[],variablesKey:null,strata:[]})},this.setAvailableVariables=e=>{null==e&&(e=[]),this.availableVariables=e,this.populations=[]},this.setAvailableStrata=e=>{null==e&&(e={}),this.availableStrata=e,this.populations=[]},this.removePopulations=e=>{this.populations=Ta(this.populations,e)},this.setPopulationVariables=(e,t)=>{var a,r;this.populations[e].variables=(a=this.availableVarNames,r=t,a.filter((e=>-1!==r.indexOf(e)))),this.populations[e].variablesKey=this.populations[e].variables.join(", "),this.populations[e].strata=this.availableStrata[this.populations[e].variablesKey]},this.rootMgr=e,(0,Pa.rC)(this,{availableVariables:Pa.LO,availableStrata:Pa.LO,populations:Pa.LO,addEmptyPopulation:Pa.aD,removePopulations:Pa.aD,setPopulationVariables:Pa.aD,setAvailableVariables:Pa.aD,setAvailableStrata:Pa.aD,populationsJS:Pa.Fl,availableVarNames:Pa.Fl,definedPopulations:Pa.Fl})}get populationsJS(){return(0,Pa.ZN)(this.populations)}get availableVarNames(){return this.availableVariables.map((e=>e.Name))}get definedPopulations(){return[...new Set(this.populations.map((e=>e.strata.map((e=>e.Combination)))).flat())]}}const Va=(e,t)=>{let a=Ot(t).map((t=>parseFloat(t.replace(e,""))));return Math.max(0,Math.max.apply(null,a.filter((e=>!isNaN(e)))))+1};class Ha{constructor(e){this.parentMgr=null,this.combinations=new Map,this.selectedCombination=null,this.combinationAllId=null,this.addEmptyCombination=(e=null,t=null)=>{C(e)&&(e=Na("combination")),C(t)&&(t=`Combination ${Va("Combination ",this.combinationsNames)}`);const a={id:e,name:t,casePopulations:[],aggrPopulations:[]};return this.combinations.set(e,a),e},this.removeCombinations=e=>{e.forEach((e=>{this.combinations.has(e)&&this.combinations.delete(e)})),this.selectedCombination=this.combinationsArray[this.combinationsArray.length-1]},this.setSelectedCombination=e=>{this.combinations.has(e)&&(this.selectedCombination=this.combinations.get(e))},this.setCombinationName=(e,t)=>{this.combinations.has(e)&&(this.combinations.get(e).name=t)},this.setCombinationCasePopulations=(e,t)=>{this.combinations.has(e)&&(this.combinations.get(e).casePopulations=t)},this.setCombinationAggrPopulations=(e,t)=>{this.combinations.has(e)&&(this.combinations.get(e).aggrPopulations=t)},this.syncCasePopulations=e=>{this.combinations.forEach((t=>{t.casePopulations=t.casePopulations.filter((t=>e.includes(t)))}))},this.syncAggrPopulations=e=>{this.combinations.forEach((t=>{t.aggrPopulations=t.aggrPopulations.filter((t=>e.includes(t)))})),this.combinationAll.aggrPopulations=e},this.parentMgr=e,(0,Pa.rC)(this,{combinations:Pa.LO,combinationAllId:Pa.LO,selectedCombination:Pa.LO,addEmptyCombination:Pa.aD,removeCombinations:Pa.aD,setSelectedCombination:Pa.aD,setCombinationName:Pa.aD,setCombinationName:Pa.aD,setCombinationCasePopulations:Pa.aD,setCombinationAggrPopulations:Pa.aD,syncCasePopulations:Pa.aD,syncAggrPopulations:Pa.aD,combinationAll:Pa.Fl,combinationsArray:Pa.Fl,combinationsNames:Pa.Fl});const t=Na("combination");this.addEmptyCombination(t,"All data"),this.setSelectedCombination(t),this.combinationAllId=t,(0,Pa.EH)((()=>{this.syncCasePopulations(this.parentMgr.popMgr.definedPopulations)})),(0,Pa.EH)((()=>{this.syncAggrPopulations(this.parentMgr.aggrDataMgr.populationNames)}))}get combinationAll(){return this.combinations.has(this.combinationAllId)?this.combinations.get(this.combinationAllId):null}get combinationsArray(){return Array.from(this.combinations.values())}get combinationsNames(){return this.combinationsArray.map((e=>e.name))}}class Ga{constructor(e,t,a=null){this.parentMgr=null,this.id=null,this.name="",this.intervals=[],this.minYear=null,this.maxYear=null,this.setId=e=>this.id=e,this.setName=e=>this.name=e,this.setMinYear=e=>{this.minYear=e,this.intervals.forEach((e=>e.startYear=Math.max(this.minYear,e.startYear))),this.reinitializeEndYears()},this.setMaxYear=e=>{this.maxYear=e,this.reinitializeEndYears()},this.setIntervals=(e,t,a)=>{this.minYear=e,this.maxYear=t,this.intervals=a},this.createIntervals=(e,t,a,r=0)=>{if(a>0){this.minYear=e,this.maxYear=t;let n=e;for(let l=0;l<a;++l){let i=n;const s=Math.max(Math.floor((t-i)/(a-l)),1);let o=Math.min(i+s,t);if(0===l&&r>0&&r>=e&&(i=e,o=r),this.addInterval(i,o,0!==l,!1,!1),n=o,o===t)break}}},this.addInterval=(e,t,a,r,n)=>{this.intervals.push({startYear:e,endYear:t,jump:a,changeInInterval:r,diffByCD4:n})},this.addEmptyInterval=()=>{this.addInterval(this.maxStartYear,this.maxYear,!1,!1,!1),this.reinitializeEndYears()},this.removeIntervals=e=>{e.length===this.intervals.length&&(e=Ta(e,0)),this.intervals=Ta(this.intervals,e),this.reinitializeEndYears()},this.setIntervalStartYear=(e,t)=>{t>=this.minYear&&t<=this.maxYear&&(this.intervals[e].startYear=t,this.reinitializeEndYears())},this.setIntervalJump=(e,t)=>this.intervals[e].jump=t,this.setIntervalChangeInInterval=(e,t)=>this.intervals[e].changeInInterval=t,this.setIntervalDiffByCD4=(e,t)=>this.intervals[e].diffByCD4=t,this.reinitializeEndYears=()=>{const e=this.intervals.length;if(e>0){this.intervals[0].startYear=this.minYear,this.intervals.sort(((e,t)=>e.startYear<t.startYear?-1:1));for(let t=0;t<e;++t)this.intervals[t].startYear=Math.min(this.intervals[t].startYear,this.maxYear),t!==e-1&&(this.intervals[t].endYear=Math.min(this.intervals[t+1].startYear,this.maxYear));this.intervals[e-1].endYear=this.maxYear}},this.parentMgr=e,this.id=Na("timeIntervals"),this.name=t,this.minYear=e.minYear,this.maxYear=e.maxYear,C(a)?this.createIntervals(this.minYear,this.maxYear,5,1984):this.intervals=a,(0,Pa.rC)(this,{id:Pa.LO,name:Pa.LO,intervals:Pa.LO,minYear:Pa.LO,maxYear:Pa.LO,setMinYear:Pa.aD,setMaxYear:Pa.aD,setIntervals:Pa.aD,addInterval:Pa.aD,addEmptyInterval:Pa.aD,removeIntervals:Pa.aD,setId:Pa.aD,setName:Pa.aD,setIntervalStartYear:Pa.aD,setIntervalJump:Pa.aD,setIntervalChangeInInterval:Pa.aD,setIntervalDiffByCD4:Pa.aD,intervalsJS:Pa.Fl,maxStartYear:Pa.Fl})}get intervalsJS(){return(0,Pa.ZN)(this.intervals)}get maxStartYear(){return 0===this.intervals.length?this.minYear:Math.max.apply(null,this.intervals.map((e=>e.startYear)))}}class Wa{constructor(e){this.id="TimeIntervalsCollectionManager",this.parentMgr=null,this.collections=new Map,this.minYear=null,this.maxYear=null,this.selectedEditCollectionId=null,this.selectedRunCollectionId=null,this.setIntervals=(e,t,a)=>{C(this.selectedEditCollection)||this.selectedEditCollection.setIntervals(e,t,a)},this.setMinYear=e=>this.minYear=e,this.setMaxYear=e=>this.maxYear=e,this.addNewCollection=(e=null,t=null)=>{C(e)&&(e=0===this.collections.size?"Default":`Set ${Va("Set ",this.collectionsNames)}`);const a=new Ga(this,e,t);this.collections.set(a.id,a),this.selectedEditCollectionId=a.id},this.deleteSelectedEditCollection=()=>{this.collections.has(this.selectedEditCollectionId)&&this.collections.delete(this.selectedEditCollectionId);const e=(0,Pa.XP)(this.collections);this.selectedEditCollectionId=e[e.length-1],this.selectedRunCollectionId=this.selectedEditCollectionId},this.setSelectedEditCollectionId=e=>this.selectedEditCollectionId=e,this.setSelectedRunCollectionId=e=>this.selectedRunCollectionId=e,this.parentMgr=e,this.minYear=e.minYear,this.maxYear=e.maxYear,this.addNewCollection(),this.selectedRunCollectionId=this.selectedEditCollection.id,(0,Pa.rC)(this,{minYear:Pa.LO,maxYear:Pa.LO,collections:Pa.LO,selectedEditCollectionId:Pa.LO,selectedRunCollectionId:Pa.LO,setIntervals:Pa.aD,setMinYear:Pa.aD,setMaxYear:Pa.aD,addNewCollection:Pa.aD,setSelectedEditCollectionId:Pa.aD,setSelectedRunCollectionId:Pa.aD,deleteSelectedEditCollection:Pa.aD,selectedEditCollection:Pa.Fl,selectedRunCollection:Pa.Fl,collectionsArray:Pa.Fl,defaultEditCollectionSelected:Pa.Fl,collectionsNames:Pa.Fl}),(0,Pa.EH)((()=>{this.collections.forEach((e=>e.setMinYear(this.minYear)))})),(0,Pa.EH)((()=>{this.collections.forEach((e=>e.setMaxYear(this.maxYear)))}))}get selectedEditCollection(){let e=null;return this.collections.has(this.selectedEditCollectionId)&&(e=this.collections.get(this.selectedEditCollectionId)),e}get selectedRunCollection(){let e=null;return this.collections.has(this.selectedRunCollectionId)&&(e=this.collections.get(this.selectedRunCollectionId)),e}get defaultEditCollectionSelected(){return"DEFAULT"===this.selectedEditCollection.name.toUpperCase()}get collectionsArray(){return(0,Pa.VO)(this.collections)}get collectionsNames(){return this.collectionsArray.map((e=>e.name))}}class za{constructor(e){this.id="ModelsManager",this.parentMgr=null,this.timeIntCollMgr=null,this.modelsParamFile=null,this.modelsParamFileName="",this.rangeYears=null,this.optimalYears=null,this.minYear=1980,this.maxYear=2016,this.minFitPos=1979,this.maxFitPos=1979,this.minFitCD4=1984,this.maxFitCD4=2016,this.minFitAIDS=1980,this.maxFitAIDS=1995,this.minFitHIVAIDS=1996,this.maxFitHIVAIDS=2016,this.fullData=!0,this.knotsCount=4,this.startIncZero=!0,this.maxIncCorr=!0,this.distributionFit="POISSON",this.delta4Fac=0,this.country="OTHER",this.bootstrapCount=100,this.bootstrapType="PARAMETRIC",this.modelsRunProgress=null,this.modelsRunLog=null,this.bootstrapRunProgress=null,this.bootstrapRunLog=null,this.plotData=null,this.setModelsParamFile=e=>{e&&(this.modelsParamFile=e,this.modelsParamFileName=e.name,(e=>{const t=new FileReader;return new Promise(((a,r)=>{t.onload=e=>{a(e.target.result)},t.onerror=r,t.readAsText(e)}))})(this.modelsParamFile).then((0,Pa.aD)("success",(e=>{this.parentMgr.btnClicked("xmlModel",e)})),(0,Pa.aD)("error",(e=>console.log(e)))))},this.setModelsParamFileName=e=>this.modelsParamFileName=e,this.setRangeYears=e=>this.rangeYears=e,this.setOptimalYears=e=>{this.optimalYears=e,this.setMinYear(e.All[0]),this.setMaxYear(e.All[1]),this.setMinFitPos(e.HIV[0]),this.setMaxFitPos(e.HIV[1]),this.setMinFitCD4(e.HIVCD4[0]),this.setMaxFitCD4(e.HIVCD4[1]),this.setMinFitAIDS(e.AIDS[0]),this.setMaxFitAIDS(e.AIDS[1]),this.setMinFitHIVAIDS(e.HIVAIDS[0]),this.setMaxFitHIVAIDS(e.HIVAIDS[1])},this.setMinYear=e=>this.minYear=Math.min(Math.max(this.optimalYears.All[0]-1,parseInt(e)),this.optimalYears.All[1]),this.setMaxYear=e=>this.maxYear=Math.min(Math.max(this.optimalYears.All[0]-1,parseInt(e)),this.optimalYears.All[1]),this.setMinFitPos=e=>this.minFitPos=Math.min(Math.max(this.optimalYears.All[0]-1,parseInt(e)),this.optimalYears.All[1]),this.setMaxFitPos=e=>this.maxFitPos=Math.min(Math.max(this.optimalYears.All[0]-1,parseInt(e)),this.optimalYears.All[1]),this.setMinFitCD4=e=>this.minFitCD4=Math.min(Math.max(this.optimalYears.All[0]-1,parseInt(e)),this.optimalYears.All[1]),this.setMaxFitCD4=e=>this.maxFitCD4=Math.min(Math.max(this.optimalYears.All[0]-1,parseInt(e)),this.optimalYears.All[1]),this.setMinFitAIDS=e=>this.minFitAIDS=Math.min(Math.max(this.optimalYears.All[0]-1,parseInt(e)),this.optimalYears.All[1]),this.setMaxFitAIDS=e=>this.maxFitAIDS=Math.min(Math.max(this.optimalYears.All[0]-1,parseInt(e)),this.optimalYears.All[1]),this.setMinFitHIVAIDS=e=>this.minFitHIVAIDS=Math.min(Math.max(this.optimalYears.All[0]-1,parseInt(e)),this.optimalYears.All[1]),this.setMaxFitHIVAIDS=e=>this.maxFitHIVAIDS=Math.min(Math.max(this.optimalYears.All[0]-1,parseInt(e)),this.optimalYears.All[1]),this.setFullData=e=>this.fullData=e,this.setKnotsCount=e=>this.knotsCount=parseInt(e),this.setStartIncZero=e=>this.startIncZero=e,this.setMaxIncCorr=e=>this.maxIncCorr=e,this.setDistributionFit=e=>this.distributionFit=e,this.setDelta4Fac=e=>this.delta4Fac=parseFloat(e),this.setCountry=e=>this.country=e,this.setBootstrapCount=e=>this.bootstrapCount=e,this.setBootstrapType=e=>this.bootstrapType=e,this.setPlotData=e=>this.plotData=e,this.setModelsRunProgress=e=>this.modelsRunProgress=e,this.setModelsRunLog=e=>this.modelsRunLog=e,this.runModels=()=>{const e={minYear:this.minYear,maxYear:this.maxYear,minFitPos:this.minFitPos,maxFitPos:this.maxFitPos,minFitCD4:this.minFitCD4,maxFitCD4:this.maxFitCD4,minFitAIDS:this.minFitAIDS,maxFitAIDS:this.maxFitAIDS,minFitHIVAIDS:this.minFitHIVAIDS,maxFitHIVAIDS:this.maxFitHIVAIDS,fullData:this.fullData,knotsCount:this.knotsCount,startIncZero:this.startIncZero,maxIncCorr:this.maxIncCorr,distributionFit:this.distributionFit,delta4Fac:this.delta4Fac,country:this.country,timeIntervals:(0,Pa.ZN)(this.timeIntCollMgr.selectedRunCollection.intervals),popCombination:(0,Pa.ZN)(this.parentMgr.popCombMgr.selectedCombination)};this.parentMgr.btnClicked("runModelBtn:HIVModelParams",e)},this.cancelModels=()=>this.parentMgr.btnClicked("cancelModelBtn"),this.setBootstrapRunProgress=e=>this.bootstrapRunProgress=e,this.setBootstrapRunLog=e=>this.bootstrapRunLog=e,this.runBootstrap=()=>this.parentMgr.btnClicked("runBootstrapBtn",{count:this.bootstrapCount,type:this.bootstrapType}),this.cancelBootstrap=()=>this.parentMgr.btnClicked("cancelBootstrapBtn"),this.getTableData=e=>{if(C(this.plotData))return{ColNames:[],Data:[]};{let t=e.filter((e=>!C(this.plotData[e])));const a=t.map((e=>"Year"===e?this.plotData.Year:this.plotData[e].map((e=>((e,t=2)=>C(e)?"":Number(e).toLocaleString(void 0,{minimumFractionDigits:t,maximumFractionDigits:2}))(e)))));return{ColNames:t,Data:a}}},this.parentMgr=e,this.timeIntCollMgr=new Wa(this),(0,Pa.rC)(this,{modelsParamFile:Pa.LO,modelsParamFileName:Pa.LO,rangeYears:Pa.LO,optimalYears:Pa.LO,minYear:Pa.LO,maxYear:Pa.LO,minFitPos:Pa.LO,maxFitPos:Pa.LO,minFitCD4:Pa.LO,maxFitCD4:Pa.LO,minFitAIDS:Pa.LO,maxFitAIDS:Pa.LO,minFitHIVAIDS:Pa.LO,maxFitHIVAIDS:Pa.LO,fullData:Pa.LO,knotsCount:Pa.LO,startIncZero:Pa.LO,maxIncCorr:Pa.LO,distributionFit:Pa.LO,delta4Fac:Pa.LO,country:Pa.LO,modelsRunProgress:Pa.LO,modelsRunLog:Pa.LO,bootstrapRunProgress:Pa.LO,bootstrapRunLog:Pa.LO,bootstrapCount:Pa.LO,bootstrapType:Pa.LO,plotData:Pa.LO,setModelsParamFile:Pa.aD,setModelsParamFileName:Pa.aD,setMinYear:Pa.aD,setMaxYear:Pa.aD,setMinFitPos:Pa.aD,setMaxFitPos:Pa.aD,setMinFitCD4:Pa.aD,setMaxFitCD4:Pa.aD,setMinFitAIDS:Pa.aD,setMaxFitAIDS:Pa.aD,setMinFitHIVAIDS:Pa.aD,setMaxFitHIVAIDS:Pa.aD,setFullData:Pa.aD,setKnotsCount:Pa.aD,setStartIncZero:Pa.aD,setMaxIncCorr:Pa.aD,setDistributionFit:Pa.aD,setDelta4Fac:Pa.aD,setCountry:Pa.aD,setBootstrapCount:Pa.aD,setBootstrapType:Pa.aD,setRangeYears:Pa.aD,setOptimalYears:Pa.aD,runModels:Pa.aD,cancelModels:Pa.aD,setModelsRunProgress:Pa.aD,setModelsRunLog:Pa.aD,runBootstrap:Pa.aD,cancelBootstrap:Pa.aD,modelsRunInProgress:Pa.Fl,bootstrapRunInProgress:Pa.Fl,gofTable1Data:Pa.Fl,gofTable2Data:Pa.Fl,gofTable3Data:Pa.Fl,gofTable4Data:Pa.Fl,gofTable5Data:Pa.Fl,gofTable6Data:Pa.Fl,gofTable7Data:Pa.Fl,outputTable1Data:Pa.Fl,outputTable2Data:Pa.Fl,outputTable3Data:Pa.Fl,outputTable4Data:Pa.Fl,mainOutputTableData:Pa.Fl}),(0,Pa.EH)((()=>{this.timeIntCollMgr.setMinYear(this.minYear)})),(0,Pa.EH)((()=>{this.timeIntCollMgr.setMaxYear(this.maxYear)}))}get modelsRunInProgress(){return null!==this.modelsRunProgress}get bootstrapRunInProgress(){return null!==this.bootstrapRunProgress}get gofTable1Data(){return this.getTableData(["Year","N_HIV_D","N_HIV_Obs_M","N_HIV_Obs_M_LB","N_HIV_Obs_M_UB"])}get gofTable2Data(){return this.getTableData(["Year","N_CD4_1_D","N_CD4_1_Obs_M","N_CD4_1_Obs_M_LB","N_CD4_1_Obs_M_UB"])}get gofTable3Data(){return this.getTableData(["Year","N_CD4_2_D","N_CD4_2_Obs_M","N_CD4_2_Obs_M_LB","N_CD4_2_Obs_M_UB"])}get gofTable4Data(){return this.getTableData(["Year","N_CD4_3_D","N_CD4_3_Obs_M","N_CD4_3_Obs_M_LB","N_CD4_3_Obs_M_UB"])}get gofTable5Data(){return this.getTableData(["Year","N_CD4_4_D","N_CD4_4_Obs_M","N_CD4_4_Obs_M_LB","N_CD4_4_Obs_M_UB"])}get gofTable6Data(){return this.getTableData(["Year","N_HIVAIDS_D","N_HIVAIDS_Obs_M","N_HIVAIDS_Obs_M_LB","N_HIVAIDS_Obs_M_UB"])}get gofTable7Data(){return this.getTableData(["Year","N_AIDS_D","N_AIDS_M","N_AIDS_M_LB","N_AIDS_M_UB"])}get outputTable1Data(){return this.getTableData(["Year","N_Inf_M","N_Inf_M_LB","N_Inf_M_UB"])}get outputTable2Data(){return this.getTableData(["Year","t_diag","t_diag_LB","t_diag_UB"])}get outputTable3Data(){return this.getTableData(["Year","N_Alive","N_Alive_LB","N_Alive_UB"])}get outputTable4Data(){return this.getTableData(["Year","N_Und_Alive_p","N_Und_Alive_p_LB","N_Und_Alive_p_UB"])}get mainOutputTableData(){return this.getTableData(["Year","N_HIV_D","N_HIV_Obs_M","N_CD4_1_D","N_CD4_2_D","N_CD4_3_D","N_CD4_4_D","N_CD4_1_Obs_M","N_CD4_2_Obs_M","N_CD4_3_Obs_M","N_CD4_4_Obs_M","N_AIDS_D","N_AIDS_M","N_HIVAIDS_D","N_HIVAIDS_Obs_M","N_Inf_M","t_diag","t_diag_p25","t_diag_p50","t_diag_p75","N_Alive","N_Alive_Diag_M","N_Und","N_Und_Alive_p","N_Und_CD4_3_M","N_Und_CD4_4_M"])}}class Qa{constructor(e){this.rootMgr=null,this.report=null,this.adjustReportParams={reportingDelay:!0,smoothing:!1,cd4ConfInt:!1},this.creatingReportInProgress=!1,this.setReport=e=>this.report=e,this.setAdjustReportReportingDelay=e=>this.adjustReportParams.reportingDelay=e,this.setAdjustReportSmoothing=e=>this.adjustReportParams.smoothing=e,this.setAdjustReportCD4ConfInt=e=>this.adjustReportParams.cd4ConfInt=e,this.setCreatingReportInProgress=e=>this.creatingReportInProgress=e,this.createReport=()=>{this.rootMgr.btnClicked("createReportBtn",Object.assign({name:"Main Report"},this.adjustReportParams))},this.cancelCreatingReport=()=>this.rootMgr.btnClicked("cancelCreatingReportBtn"),this.restoreDefaults=()=>{this.adjustReportParams={reportingDelay:!0,smoothing:!1,cd4ConfInt:!1}},this.rootMgr=e,(0,Pa.rC)(this,{report:Pa.LO,adjustReportParams:Pa.LO,creatingReportInProgress:Pa.LO,setReport:Pa.aD,setAdjustReportReportingDelay:Pa.aD,setAdjustReportSmoothing:Pa.aD,setAdjustReportCD4ConfInt:Pa.aD,restoreDefaults:Pa.aD,createReport:Pa.aD,cancelCreatingReport:Pa.aD,setCreatingReportInProgress:Pa.aD})}}(0,Pa.jQ)({enforceActions:"observed",computedRequiresReaction:!0});class Ja{constructor(){this.id="AppManager",this.uiStateMgr=null,this.notificationsMgr=null,this.attrMappingMgr=null,this.origGroupMgr=null,this.caseBasedDataMgr=null,this.aggrDataMgr=null,this.summaryDataMgr=null,this.adjustMgr=null,this.popMgr=null,this.popCombMgr=null,this.modelMgr=null,this.reportMgr=null,this.shinyState="DISCONNECTED",this.shinyMessage={},this.seed=null,this.onApiURL=e=>{console.log(e)},this.onShinyEvent=e=>{switch(console.log("onShinyEvent",e),e.type){case"COMPLETED_STEPS_SET":"SUCCESS"===e.payload.ActionStatus&&this.uiStateMgr.setCompletedSteps(e.payload.CompletedSteps);break;case"CASE_BASED_DATA_UPLOADED":this.caseBasedDataMgr.setActionStatus(e.payload.ActionStatus),this.caseBasedDataMgr.setActionMessage(e.payload.ActionMessage),"SUCCESS"===e.payload.ActionStatus&&(this.caseBasedDataMgr.setFileName(e.payload.FileName),this.caseBasedDataMgr.setFilePath(e.payload.FilePath),this.caseBasedDataMgr.setFileSize(e.payload.FileSize),this.caseBasedDataMgr.setFileType(e.payload.FileType),this.uiStateMgr.setLastEventType(e.type));break;case"CASE_BASED_DATA_READ":this.caseBasedDataMgr.setActionStatus(e.payload.ActionStatus),this.caseBasedDataMgr.setActionMessage(e.payload.ActionMessage),"SUCCESS"===e.payload.ActionStatus&&(this.caseBasedDataMgr.setColumnNames(e.payload.ColumnNames),this.caseBasedDataMgr.setRecordCount(e.payload.RecordCount),this.attrMappingMgr.setMapping(e.payload.AttrMapping),this.summaryDataMgr.reset(),this.notificationsMgr.setMsg("Case-based data uploaded"),this.uiStateMgr.setLastEventType(e.type));break;case"CASE_BASED_ATTRIBUTE_MAPPING_APPLY_START":"SUCCESS"===e.payload.ActionStatus&&this.notificationsMgr.setMsg("Applying attribute mapping");break;case"CASE_BASED_ATTRIBUTE_MAPPING_APPLY_END":this.attrMappingMgr.setActionStatus(e.payload.ActionStatus),this.attrMappingMgr.setActionMessage(e.payload.ActionMessage),"SUCCESS"===e.payload.ActionStatus?(this.origGroupMgr.setDistribution(e.payload.OriginDistribution),this.origGroupMgr.setType(e.payload.OriginGroupingType),this.origGroupMgr.setGroupings(e.payload.OriginGrouping),this.notificationsMgr.setMsg("Attribute mapping has been applied"),this.summaryDataMgr.reset(),this.uiStateMgr.setLastEventType(e.type)):(this.notificationsMgr.setMsg("Attribute mapping could not be applied"),this.uiStateMgr.setLastEventType("CASE_BASED_DATA_READ"));break;case"CASE_BASED_DATA_ORIGIN_GROUPING_PREPARED":"SUCCESS"===e.payload.ActionStatus?(this.origGroupMgr.setType(e.payload.OriginGroupingType),this.origGroupMgr.setGroupings(e.payload.OriginGrouping)):this.notificationsMgr.setMsg("There was a problem with setting this origin grouping");break;case"CASE_BASED_DATA_ORIGIN_GROUPING_APPLIED":this.origGroupMgr.setActionStatus(e.payload.ActionStatus),this.origGroupMgr.setActionMessage(e.payload.ActionMessage),"SUCCESS"===e.payload.ActionStatus?(this.summaryDataMgr.reset(),this.summaryDataMgr.setDiagYearPlotData(e.payload.Summary.DiagYearPlotData),this.summaryDataMgr.setNotifQuarterPlotData(e.payload.Summary.NotifQuarterPlotData),this.adjustMgr.setRDWithoutStartYear(e.payload.Summary.DiagYearPlotData.filter.scaleMinYear),this.adjustMgr.setRDWithoutEndYear(Math.round(e.payload.Summary.NotifQuarterPlotData.filter.scaleMaxYear)),this.adjustMgr.setRDWithoutEndQrt(ze(e.payload.Summary.NotifQuarterPlotData.filter.scaleMaxYear)),this.adjustMgr.setRDWithStartYear(e.payload.Summary.DiagYearPlotData.filter.scaleMinYear),this.adjustMgr.setRDWithEndYear(Math.round(e.payload.Summary.NotifQuarterPlotData.filter.scaleMaxYear)),this.adjustMgr.setRDWithEndQrt(ze(e.payload.Summary.NotifQuarterPlotData.filter.scaleMaxYear)),this.adjustMgr.setDataBounds({startYear:e.payload.Summary.DiagYearPlotData.filter.scaleMinYear,endYear:Math.round(e.payload.Summary.NotifQuarterPlotData.filter.scaleMaxYear),endQrt:ze(e.payload.Summary.NotifQuarterPlotData.filter.scaleMaxYear)}),this.uiStateMgr.setLastEventType(e.type)):this.uiStateMgr.setLastEventType("CASE_BASED_ATTRIBUTE_MAPPING_APPLY_END"),this.notificationsMgr.setMsg(e.payload.ActionMessage);break;case"CASE_BASED_SUMMARY_DATA_PREPARED":"SUCCESS"===e.payload.ActionStatus?(this.summaryDataMgr.setSelectedCount(e.payload.Summary.SelectedCount),this.summaryDataMgr.setTotalCount(e.payload.Summary.TotalCount),this.summaryDataMgr.setMissPlotData(e.payload.Summary.MissPlotData),this.summaryDataMgr.setRepDelPlotData(e.payload.Summary.RepDelPlotData)):this.notificationsMgr.setMsg(e.payload.ActionMessage);break;case"ADJUSTMENTS_RUN_STARTED":"SUCCESS"===e.payload.ActionStatus&&(this.adjustMgr.setAdjustmentsRunProgress(1),this.adjustMgr.setAdjustmentsReport(null));break;case"ADJUSTMENTS_RUN_LOG_SET":"SUCCESS"===e.payload.ActionStatus&&this.adjustMgr.setAdjustmentsRunLog(e.payload.RunLog);break;case"ADJUSTMENTS_RUN_FINISHED":this.adjustMgr.setAdjustmentsRunProgress(null),"SUCCESS"===e.payload.ActionStatus?(this.uiStateMgr.setLastEventType(e.type),this.adjustMgr.setAdjustmentsReport(e.payload.AdjustmentsReport),this.adjustMgr.setRunAdjustmentsTypes(e.payload.RunAdjustmentsTypes),this.notificationsMgr.setMsg("Adjustment run finished")):this.notificationsMgr.setMsg("Adjustment run failed");break;case"ADJUSTMENTS_RUN_CANCELLED":this.adjustMgr.setAdjustmentsRunProgress(null),"SUCCESS"===e.payload.ActionStatus&&this.notificationsMgr.setMsg("Adjustment run cancelled");break;case"CREATING_REPORT_STARTED":"SUCCESS"===e.payload.ActionStatus&&(this.reportMgr.setCreatingReportInProgress(!0),this.reportMgr.setReport(null),this.notificationsMgr.setMsg("Creating report started"));break;case"CREATING_REPORT_FINISHED":"SUCCESS"===e.payload.ActionStatus?(this.uiStateMgr.setLastEventType(e.type),this.reportMgr.setReport(e.payload.Report),this.notificationsMgr.setMsg("Creating report finished")):this.notificationsMgr.setMsg("Creating report failed"),this.reportMgr.setCreatingReportInProgress(!1);break;case"AGGR_DATA_UPLOADED":this.aggrDataMgr.setActionStatus(e.payload.ActionStatus),this.aggrDataMgr.setActionMessage(e.payload.ActionMessage),"SUCCESS"===e.payload.ActionStatus&&(this.aggrDataMgr.setFileName(e.payload.FileName),this.aggrDataMgr.setFilePath(e.payload.FilePath),this.aggrDataMgr.setFileSize(e.payload.FileSize),this.aggrDataMgr.setFileType(e.payload.FileType));break;case"AGGR_DATA_READ":this.aggrDataMgr.setActionStatus(e.payload.ActionStatus),this.aggrDataMgr.setActionMessage(e.payload.ActionMessage),"SUCCESS"===e.payload.ActionStatus&&(this.aggrDataMgr.setDataFiles(e.payload.DataFiles),this.aggrDataMgr.setPopulationNames(e.payload.PopulationNames),this.aggrDataMgr.setRangeYears(e.payload.RangeYears),this.notificationsMgr.setMsg("Aggregated data uploaded"));break;case"AVAILABLE_STRATA_SET":"SUCCESS"===e.payload.ActionStatus&&(this.popMgr.setAvailableVariables(e.payload.AvailableVariables),this.popMgr.setAvailableStrata(e.payload.AvailableStrata));break;case"MODELS_PARAMS_LOADED":"SUCCESS"===e.payload.ActionStatus&&(this.modelMgr.setMinYear(e.payload.Params.minYear),this.modelMgr.setMaxYear(e.payload.Params.maxYear),this.modelMgr.setMinFitPos(e.payload.Params.minFitPos),this.modelMgr.setMaxFitPos(e.payload.Params.maxFitPos),this.modelMgr.setMinFitCD4(e.payload.Params.minFitCD4),this.modelMgr.setMaxFitCD4(e.payload.Params.maxFitCD4),this.modelMgr.setMinFitAIDS(e.payload.Params.minFitAIDS),this.modelMgr.setMaxFitAIDS(e.payload.Params.maxFitAIDS),this.modelMgr.setMinFitHIVAIDS(e.payload.Params.minFitHIVAIDS),this.modelMgr.setMaxFitHIVAIDS(e.payload.Params.maxFitHIVAIDS),this.modelMgr.setFullData(e.payload.Params.fullData),this.modelMgr.setKnotsCount(e.payload.Params.knotsCount),this.modelMgr.setStartIncZero(e.payload.Params.startIncZero),this.modelMgr.setMaxIncCorr(e.payload.Params.maxIncCorr),this.modelMgr.setDistributionFit(e.payload.Params.distributionFit),this.modelMgr.setDelta4Fac(e.payload.Params.delta4Fac),this.modelMgr.setCountry(e.payload.Params.country),this.modelMgr.timeIntCollMgr.setIntervals(e.payload.Params.minYear,e.payload.Params.maxYear,e.payload.Params.timeIntervals));break;case"MODELS_YEAR_RANGES_DETERMINED":"SUCCESS"===e.payload.ActionStatus&&(this.modelMgr.setRangeYears(e.payload.Years.Range),this.modelMgr.setOptimalYears(e.payload.Years.Optimal)),this.notificationsMgr.setMsg(e.payload.ActionMessage);break;case"MODELS_RUN_STARTED":"SUCCESS"===e.payload.ActionStatus&&(this.modelMgr.setModelsRunProgress(1),this.modelMgr.setModelsRunLog(null)),this.notificationsMgr.setMsg(e.payload.ActionMessage);break;case"MODELS_RUN_LOG_SET":"SUCCESS"===e.payload.ActionStatus&&this.modelMgr.setModelsRunLog(e.payload.RunLog);break;case"MODELS_RUN_FINISHED":this.modelMgr.setModelsRunProgress(null),"SUCCESS"===e.payload.ActionStatus&&(this.modelMgr.setPlotData(e.payload.PlotData),this.uiStateMgr.setLastEventType(e.type)),this.notificationsMgr.setMsg(e.payload.ActionMessage);break;case"MODELS_RUN_CANCELLED":"SUCCESS"===e.payload.ActionStatus&&(this.modelMgr.setModelsRunProgress(null),this.notificationsMgr.setMsg(e.payload.ActionMessage));break;case"BOOTSTRAP_RUN_STARTED":"SUCCESS"===e.payload.ActionStatus&&(this.modelMgr.setBootstrapRunProgress(1),this.modelMgr.setBootstrapRunLog(null));break;case"BOOTSTRAP_RUN_LOG_SET":"SUCCESS"===e.payload.ActionStatus&&this.modelMgr.setBootstrapRunLog(e.payload.RunLog);break;case"BOOTSTRAP_RUN_FINISHED":this.modelMgr.setBootstrapRunProgress(null),"SUCCESS"===e.payload.ActionStatus&&(this.modelMgr.setPlotData(e.payload.PlotData),this.uiStateMgr.setLastEventType(e.type)),this.notificationsMgr.setMsg(e.payload.ActionMessage);break;case"BOOTSTRAP_RUN_CANCELLED":"SUCCESS"===e.payload.ActionStatus&&(this.modelMgr.setBootstrapRunProgress(null),this.notificationsMgr.setMsg(e.payload.ActionMessage));break;case"SEED_SET":"SUCCESS"===e.payload.ActionStatus&&(this.setSeed(e.payload.Seed),this.notificationsMgr.setMsg(e.payload.ActionMessage))}},this.setShinyState=e=>{this.shinyState=e,"SESSION_INITIALIZED"===e&&(Shiny.addCustomMessageHandler("shinyHandler",this.onShinyEvent),Shiny.addCustomMessageHandler("apiURL",this.onApiURL))},this.btnClicked=(e,t="")=>{!C(window.Shiny)&&this.shinyReady?Shiny.setInputValue(e,t,{priority:"event"}):console.log("btnClicked: Shiny is not available",e,(0,Pa.ZN)(t))},this.inputValueSet=(e,t)=>{!C(window.Shiny)&&this.shinyReady?Shiny.setInputValue(e,t):console.log("inputValueSet: Shiny is not available",e,(0,Pa.ZN)(t))},this.setShinyMessage=e=>this.shinyMessage=e,this.setSeed=e=>{console.log(e),this.seed=""===e?null:e},this.unbindShiny=e=>{!C(window.Shiny)&&this.shinyReady?(window.Shiny.unbindAll(),Ot(e).forEach((e=>delete window.Shiny.shinyapp.$bindings[e]))):console.log("unbindShinyInputs: Shiny is not available")},this.bindShiny=()=>{!C(window.Shiny)&&this.shinyReady?window.Shiny.bindAll():console.log("bindShinyInputs: Shiny is not available")},this.save=()=>{const e=(0,Ia.qC)(this),t=JSON.stringify(e,{},2);this.btnClicked("saveState",t)},this.uiStateMgr=new Ra(this),this.notificationsMgr=new _a(this),this.caseBasedDataMgr=new La(this),this.aggrDataMgr=new ja(this),this.attrMappingMgr=new Fa(this),this.origGroupMgr=new wa(this),this.summaryDataMgr=new ka(this),this.adjustMgr=new Ba(this),this.popMgr=new Ua(this),this.popCombMgr=new Ha(this),this.modelMgr=new za(this),this.reportMgr=new Qa(this),(0,Pa.rC)(this,{shinyState:Pa.LO,shinyMessage:Pa.LO,seed:Pa.LO,seedText:Pa.Fl,shinyReady:Pa.Fl,jsonShinyMessage:Pa.Fl,setShinyState:Pa.aD,btnClicked:Pa.aD,inputValueSet:Pa.aD,setShinyMessage:Pa.aD,unbindShiny:Pa.aD,bindShiny:Pa.aD,save:Pa.aD,setSeed:Pa.aD})}get shinyReady(){return"SESSION_INITIALIZED"===this.shinyState||"DEBUGGING"===this.shinyState}get jsonShinyMessage(){return JSON.stringify(this.shinyMessage)}get seedText(){return C(this.seed)?"":this.seed}get shinyStateHuman(){let e="";switch(this.shinyState){case"DISCONNECTED":e="DISCONNECTED";break;case"CONNECTED":e="INITIALIZING";break;case"DEBUGGING":case"SESSION_INITIALIZED":e="READY"}return e}}class $a{}class qa{}(0,Ia.yu)(qa,{parentMgr:(0,Ia.YP)($a),id:(0,Ia.Ru)(),name:(0,Ia.Ru)(),intervals:(0,Ia.pb)((0,Ia.LZ)()),minYear:(0,Ia.Ru)(),maxYear:(0,Ia.Ru)()}),(0,Ia.yu)($a,{id:(0,Ia.QU)(),parentMgr:(0,Ia.YP)(za),collections:(0,Ia.UI)((0,Ia.Ry)(qa)),minYear:(0,Ia.Ru)(),maxYear:(0,Ia.Ru)(),selectedEditCollectionId:(0,Ia.Ru)(),selectedRunCollectionId:(0,Ia.Ru)()}),(0,Ia.yu)(za,{id:(0,Ia.QU)(),parentMgr:(0,Ia.YP)(Ja),timeIntCollMgr:(0,Ia.Ry)($a),modelsParamFile:(0,Ia.Ru)(),modelsParamFileName:(0,Ia.Ru)(),rangeYears:(0,Ia.LZ)(),optimalYears:(0,Ia.LZ)(),minYear:(0,Ia.Ru)(),maxYear:(0,Ia.Ru)(),minFitPos:(0,Ia.Ru)(),maxFitPos:(0,Ia.Ru)(),minFitCD4:(0,Ia.Ru)(),maxFitCD4:(0,Ia.Ru)(),minFitAIDS:(0,Ia.Ru)(),maxFitAIDS:(0,Ia.Ru)(),minFitHIVAIDS:(0,Ia.Ru)(),maxFitHIVAIDS:(0,Ia.Ru)(),fullData:(0,Ia.Ru)(),knotsCount:(0,Ia.Ru)(),startIncZero:(0,Ia.Ru)(),maxIncCorr:(0,Ia.Ru)(),distributionFit:(0,Ia.Ru)(),delta4Fac:(0,Ia.Ru)(),country:(0,Ia.Ru)(),bootstrapCount:(0,Ia.Ru)(),bootstrapType:(0,Ia.Ru)(),modelsRunProgress:(0,Ia.Ru)(),modelsRunLog:(0,Ia.Ru)(),bootstrapRunProgress:(0,Ia.Ru)(),bootstrapRunLog:(0,Ia.Ru)(),plotData:(0,Ia.LZ)()}),(0,Ia.yu)(Qa,{rootMgr:(0,Ia.YP)(Ja),report:(0,Ia.Ru)(),adjustReportParams:(0,Ia.LZ)(),creatingReportInProgress:(0,Ia.Ru)()});class Ka{}(0,Ia.yu)(Ka,{id:(0,Ia.QU)(),name:(0,Ia.Ru)(),aggrPopulations:(0,Ia.pb)((0,Ia.Ru)()),casePopulations:(0,Ia.pb)((0,Ia.Ru)())}),(0,Ia.yu)(Ha,{rootMgr:(0,Ia.YP)(Ja),combinations:(0,Ia.UI)((0,Ia.Ry)(Ka)),selectedCombination:(0,Ia.YP)(Ka),combinationAllId:(0,Ia.Ru)()}),(0,Ia.yu)(Ua,{rootMgr:(0,Ia.YP)(Ja),availableVariables:(0,Ia.pb)((0,Ia.LZ)()),availableStrata:(0,Ia.LZ)(),populations:(0,Ia.pb)((0,Ia.LZ)())}),(0,Ia.yu)(Ba,{rootMgr:(0,Ia.YP)(Ja),miAdjustType:(0,Ia.Ru)(),miJomoSettings:(0,Ia.LZ)(),miMiceSettings:(0,Ia.LZ)(),rdAdjustType:(0,Ia.Ru)(),dataBounds:(0,Ia.LZ)(),rdWithoutTrendSettings:(0,Ia.LZ)(),rdWithTrendSettings:(0,Ia.LZ)(),adjustmentsRunProgress:(0,Ia.Ru)(),adjustmentsRunLog:(0,Ia.Ru)(),adjustmentsReport:(0,Ia.Ru)()}),(0,Ia.yu)(ka,{rootMgr:(0,Ia.YP)(Ja),selectedCount:(0,Ia.Ru)(),totalCount:(0,Ia.Ru)(),diagYearPlotData:(0,Ia.LZ)(),notifQuarterPlotData:(0,Ia.LZ)(),missPlotData:(0,Ia.LZ)(),missPlotSelection:(0,Ia.Ru)(),repDelPlotData:(0,Ia.LZ)(),repDelPlotSelection:(0,Ia.Ru)()}),(0,Ia.yu)(ja,{rootMgr:(0,Ia.YP)(Ja),fileName:(0,Ia.Ru)(),fileSize:(0,Ia.Ru)(),fileType:(0,Ia.Ru)(),filePath:(0,Ia.Ru)(),dataFiles:(0,Ia.LZ)(),origDataFiles:(0,Ia.LZ)(),rangeYears:(0,Ia.pb)((0,Ia.Ru)()),dataFileNameToIdxMap:(0,Ia.UI)(),populationNames:(0,Ia.pb)((0,Ia.Ru)()),fileUploadProgress:(0,Ia.Ru)(),actionStatus:(0,Ia.Ru)(),actionMessage:(0,Ia.Ru)()}),(0,Ia.yu)(La,{rootMgr:(0,Ia.YP)(Ja),fileName:(0,Ia.Ru)(),fileSize:(0,Ia.Ru)(),fileType:(0,Ia.Ru)(),filePath:(0,Ia.Ru)(),columnNames:(0,Ia.pb)((0,Ia.Ru)()),recordCount:(0,Ia.Ru)(),uploadProgress:(0,Ia.Ru)(),actionStatus:(0,Ia.Ru)(),actionMessage:(0,Ia.Ru)()}),(0,Ia.yu)(wa,{rootMgr:(0,Ia.YP)(Ja),distribution:(0,Ia.LZ)(),groupings:(0,Ia.pb)((0,Ia.LZ)()),type:(0,Ia.Ru)(),actionStatus:(0,Ia.Ru)(),actionMessage:(0,Ia.Ru)()}),(0,Ia.yu)(Fa,{rootMgr:(0,Ia.YP)(Ja),mapping:(0,Ia.pb)((0,Ia.LZ)()),actionStatus:(0,Ia.Ru)(),actionMessage:(0,Ia.Ru)()}),(0,Ia.yu)(_a,{rootMgr:(0,Ia.YP)(Ja),msgInfo:(0,Ia.LZ)()}),(0,Ia.yu)(Ra,{rootMgr:(0,Ia.YP)(Ja),lastEventType:(0,Ia.Ru)(),completedSteps:(0,Ia.pb)((0,Ia.Ru)()),pages:(0,Ia.pb)((0,Ia.LZ)()),activePageId:(0,Ia.Ru)()}),(0,Ia.yu)(Ja,{id:(0,Ia.QU)()});window.jQuery=s(),window.$=s();const Xa=new Ja;n.render(r.createElement(l.zt,{appMgr:Xa},r.createElement(xa,null)),document.getElementById("app"),(()=>{console.log("ReactDOM.render complete"),s()((()=>{s()(document).on("shiny:disconnected",(()=>Xa.setShinyState("DISCONNECTED"))),s()(document).on("shiny:connected",(()=>Xa.setShinyState("CONNECTED"))),s()(document).on("shiny:sessioninitialized",(()=>Xa.setShinyState("SESSION_INITIALIZED"))),s()(document).on("shiny:message",(e=>Xa.setShinyMessage(e))),s()(document).on("shiny:inputchanged",(e=>console.log("shiny:inputchanged:",e))),s()(document).on("shiny:filedownload",(e=>console.log("shiny:filedownload:",e)))}))}))}},a={};function r(e){var n=a[e];if(void 0!==n)return n.exports;var l=a[e]={exports:{}};return t[e](l,l.exports,r),l.exports}r.m=t,e=[],r.O=(t,a,n,l)=>{if(!a){var i=1/0;for(m=0;m<e.length;m++){for(var[a,n,l]=e[m],s=!0,o=0;o<a.length;o++)(!1&l||i>=l)&&Object.keys(r.O).every((e=>r.O[e](a[o])))?a.splice(o--,1):(s=!1,l<i&&(i=l));s&&(e.splice(m--,1),t=n())}return t}l=l||0;for(var m=e.length;m>0&&e[m-1][2]>l;m--)e[m]=e[m-1];e[m]=[a,n,l]},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var a in t)r.o(t,a)&&!r.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={179:0};r.O.j=t=>0===e[t];var t=(t,a)=>{var n,l,[i,s,o]=a,m=0;for(n in s)r.o(s,n)&&(r.m[n]=s[n]);if(o)var c=o(r);for(t&&t(a);m<i.length;m++)l=i[m],r.o(e,l)&&e[l]&&e[l][0](),e[i[m]]=0;return r.O(c)},a=self.webpackChunkhiv_platform=self.webpackChunkhiv_platform||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var n=r.O(void 0,[216],(()=>r(8640)));n=r.O(n)})();